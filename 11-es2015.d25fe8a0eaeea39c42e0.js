(window.webpackJsonp=window.webpackJsonp||[]).push([[11],{zOVB:function(e,t,i){"use strict";i.r(t),i.d(t,"GroupsModule",(function(){return de}));var s=i("ofXK"),n=i("tyNb"),o=i("3Pt+"),c=i("cp0P"),r=i("dq/x"),l=i("fXoL"),a=i("hMga"),b=i("TqRN"),d=i("GzUj"),p=i("zivW"),u=i("Xv+k"),m=i("8bGj"),f=i("LRne"),g=i("vkgz"),h=i("bOdf"),S=i("5+tZ"),R=i("lJxs"),v=i("IAdc"),N=i("5eHb"),k=i("1kSV");const G=["respectfulDropdown"],y=["disrespectfulDropdown"];function I(e,t){if(1&e){const e=l.Tb();l.Qb(0),l.Qb(1,13),l.Sb(2,"div",14),l.Sb(3,"div",15),l.Sb(4,"label",16),l.Gc(5,"\u0414\u0438\u0441\u0446\u0438\u043f\u043b\u0438\u043d\u0430"),l.Rb(),l.Nb(6,"input",17),l.Rb(),l.Sb(7,"div",15),l.Sb(8,"label",18),l.Gc(9,"\u0423\u0432\u0430\u0436\u0438\u0442\u0435\u043b\u044c\u043d\u044b\u0435 \u043f\u0440\u043e\u043f\u0443\u0441\u043a\u0438"),l.Rb(),l.Sb(10,"ngx-select-dropdown",19,20),l.ec("change",(function(i){l.xc(e);const s=t.index;return l.gc().changeRespectful(i.value,s)})),l.Rb(),l.Rb(),l.Sb(12,"div",15),l.Sb(13,"label",21),l.Gc(14,"\u041d\u0435\u0443\u0432\u0430\u0436\u0438\u0442\u0435\u043b\u044c\u043d\u044b\u0435 \u043f\u0440\u043e\u043f\u0443\u0441\u043a\u0438"),l.Rb(),l.Sb(15,"ngx-select-dropdown",22,23),l.ec("change",(function(i){l.xc(e);const s=t.index;return l.gc().changeDisrespectful(i.value,s)})),l.Rb(),l.Rb(),l.Rb(),l.Pb(),l.Pb()}if(2&e){const e=t.$implicit,i=t.index,s=l.gc();l.zb(1),l.nc("formGroupName",i),l.zb(5),l.nc("value",e.disciplineName),l.zb(4),l.nc("options",s.students)("config",s.studentConfig)("multiple",!0),l.zb(5),l.nc("options",s.students)("config",s.studentConfig)("multiple",!0)}}let F=(()=>{class e{constructor(e,t,i){this.fb=e,this.toasterService=t,this.modal=i,this.skippingForm=this.fb.group({date:[{value:"",disabled:!0}],skippings:this.fb.array([])}),this.studentConfig={displayKey:"studentName",search:!0,limitTo:3,selectedItems:[],searchPlaceholder:"\u041f\u043e\u0438\u0441\u043a",noResultsFound:"\u041d\u0435 \u043d\u0430\u0439\u0434\u0435\u043d\u043e \u0440\u0435\u0437\u0443\u043b\u044c\u0442\u0430\u0442\u043e\u0432",placeholder:"\u0412\u044b\u0431\u0435\u0440\u0438\u0442\u0435"}}ngOnInit(){this.showSkippings(this.schedule),this.skippingForm.patchValue({date:this.schedule.regionalDate})}createSkipping(){return this.fb.group({id:["",o.o.required],respectfulStudentObjects:[[]],disrespectfulStudentObjects:[[]]})}showSkippings(e){this.skippingForm.patchValue(e),e.lessons.forEach(e=>{const t=this.createSkipping();t.patchValue(e),this.getSkippings().push(t)})}getSkippings(){return this.skippingForm.get("skippings")}changeRespectful(e,t){const i=this.disrespectfulDropdown.toArray();i[t].availableItems=this.students.filter(s=>!e.includes(s)&&!i[t].selectedItems.includes(s))}changeDisrespectful(e,t){const i=this.respectfulDropdown.toArray();i[t].availableItems=this.students.filter(s=>!e.includes(s)&&!i[t].selectedItems.includes(s))}clickAdd(){this.getSkippings().controls.forEach((e,t)=>{e.patchValue({id:t})}),this.skippingForm.valid?(this.toasterService.success("\u0424\u043e\u0440\u043c\u0430 \u0432\u0430\u043b\u0438\u0434\u043d\u0430","\u0423\u0441\u043f\u0435\u0445"),this.modal.close(this.skippingForm.value)):this.toasterService.error("\u0424\u043e\u0440\u043c\u0430 \u043d\u0435\u0432\u0430\u043b\u0438\u0434\u043d\u0430","\u041e\u0448\u0438\u0431\u043a\u0430")}}return e.\u0275fac=function(t){return new(t||e)(l.Mb(o.c),l.Mb(N.b),l.Mb(k.a))},e.\u0275cmp=l.Gb({type:e,selectors:[["app-add-skippings"]],viewQuery:function(e,t){var i;1&e&&(l.Mc(G,!0),l.Mc(y,!0)),2&e&&(l.uc(i=l.fc())&&(t.respectfulDropdown=i),l.uc(i=l.fc())&&(t.disrespectfulDropdown=i))},decls:18,vars:2,consts:[[1,"modal-header"],[1,"modal-title"],["type","button",1,"close",3,"click"],["aria-hidden","true"],[1,"modal-body"],[3,"formGroup"],["for","scheduleDate",1,"col-form-label"],["id","scheduleDate","formControlName","date",1,"form-control",2,"margin-bottom","20px"],["formArrayName","skippings"],[4,"ngFor","ngForOf"],[1,"modal-footer"],["type","button","data-dismiss","modal",1,"btn","btn-primary",3,"click"],["type","button","data-dismiss","modal",1,"btn","btn-secondary",3,"click"],[3,"formGroupName"],[1,"row",2,"margin-bottom","10px"],[1,"col"],["for","discipline",1,"col-form-label"],["id","discipline","disabled","",1,"form-control",3,"value"],["for","respectful",1,"col-form-label"],["id","respectful","formControlName","respectfulStudentObjects",3,"options","config","multiple","change"],["respectfulDropdown",""],["for","disrespectful",1,"col-form-label"],["id","disrespectful","formControlName","disrespectfulStudentObjects",3,"options","config","multiple","change"],["disrespectfulDropdown",""]],template:function(e,t){1&e&&(l.Sb(0,"div",0),l.Sb(1,"h5",1),l.Gc(2,"\u0414\u043e\u0431\u0430\u0432\u0438\u0442\u044c \u043f\u0440\u043e\u043f\u0443\u0441\u043a\u0438"),l.Rb(),l.Sb(3,"button",2),l.ec("click",(function(){return t.modal.dismiss()})),l.Sb(4,"span",3),l.Gc(5,"\xd7"),l.Rb(),l.Rb(),l.Rb(),l.Sb(6,"div",4),l.Sb(7,"form",5),l.Sb(8,"label",6),l.Gc(9,"\u0414\u0430\u0442\u0430"),l.Rb(),l.Nb(10,"input",7),l.Qb(11,8),l.Ec(12,I,17,8,"ng-container",9),l.Pb(),l.Rb(),l.Rb(),l.Sb(13,"div",10),l.Sb(14,"button",11),l.ec("click",(function(){return t.clickAdd()})),l.Gc(15,"\u0414\u043e\u0431\u0430\u0432\u0438\u0442\u044c"),l.Rb(),l.Sb(16,"button",12),l.ec("click",(function(){return t.modal.dismiss()})),l.Gc(17,"\u0417\u0430\u043a\u0440\u044b\u0442\u044c"),l.Rb(),l.Rb()),2&e&&(l.zb(7),l.nc("formGroup",t.skippingForm),l.zb(5),l.nc("ngForOf",t.schedule.lessons))},directives:[o.q,o.k,o.e,o.a,o.j,o.d,o.b,s.m,o.f,m.a],styles:[""]}),e})();var x=i("AytR"),z=i("tk/3");let C=(()=>{class e{constructor(e){this.http=e,this.url=x.a.apiUrl+"skippings"}create(e){return this.http.post(this.url,e)}getByScheduleId(e){return this.http.get(this.url+"/by-schedule-id/"+e)}verification(e){return this.http.get(this.url+"/verification/"+e)}}return e.\u0275fac=function(t){return new(t||e)(l.ac(z.b))},e.\u0275prov=l.Ib({token:e,factory:e.\u0275fac,providedIn:"root"}),e})();var w=i("lGQG");const O=["respectfulDropdown"],D=["disrespectfulDropdown"];function E(e,t){if(1&e&&(l.Qb(0),l.Qb(1,13),l.Sb(2,"div",14),l.Sb(3,"div",15),l.Sb(4,"label",16),l.Gc(5,"\u0414\u0438\u0441\u0446\u0438\u043f\u043b\u0438\u043d\u0430"),l.Rb(),l.Nb(6,"input",17),l.Rb(),l.Sb(7,"div",15),l.Sb(8,"label",18),l.Gc(9,"\u0423\u0432\u0430\u0436\u0438\u0442\u0435\u043b\u044c\u043d\u044b\u0435 \u043f\u0440\u043e\u043f\u0443\u0441\u043a\u0438"),l.Rb(),l.Nb(10,"ngx-select-dropdown",19,20),l.Rb(),l.Sb(12,"div",15),l.Sb(13,"label",21),l.Gc(14,"\u041d\u0435\u0443\u0432\u0430\u0436\u0438\u0442\u0435\u043b\u044c\u043d\u044b\u0435 \u043f\u0440\u043e\u043f\u0443\u0441\u043a\u0438"),l.Rb(),l.Nb(15,"ngx-select-dropdown",22,23),l.Rb(),l.Rb(),l.Pb(),l.Pb()),2&e){const e=t.$implicit,i=t.index,s=l.gc();l.zb(1),l.nc("formGroupName",i),l.zb(5),l.nc("value",e.disciplineName),l.zb(4),l.nc("options",s.students)("config",s.studentConfig)("multiple",!0),l.zb(5),l.nc("options",s.students)("config",s.studentConfig)("multiple",!0)}}function M(e,t){if(1&e){const e=l.Tb();l.Sb(0,"button",24),l.ec("click",(function(){return l.xc(e),l.gc().clickVerified()})),l.Gc(1,"\u041e\u0442\u043c\u0435\u0442\u0438\u0442\u044c"),l.Rb()}}let A=(()=>{class e{constructor(e,t,i,s,n){this.fb=e,this.toasterService=t,this.skippingsService=i,this.authService=s,this.modal=n,this.readOnly=!1,this.skippingForm=this.fb.group({date:[{value:"",disabled:!0}],skippings:this.fb.array([])}),this.studentConfig={displayKey:"studentName",search:!1,limitTo:3,selectedItems:[],searchPlaceholder:"\u041f\u043e\u0438\u0441\u043a",noResultsFound:"\u041d\u0435 \u043d\u0430\u0439\u0434\u0435\u043d\u043e \u0440\u0435\u0437\u0443\u043b\u044c\u0442\u0430\u0442\u043e\u0432",placeholder:"\u0412\u044b\u0431\u0435\u0440\u0438\u0442\u0435"}}ngOnInit(){const e=this.skippingsService.getByScheduleId(this.schedule._id).subscribe(t=>{this.skipping=t,this.getSkippings().controls.forEach((e,t)=>{e.patchValue({id:this.skipping.skippings[t].id,respectfulStudentObjects:[...this.skipping.skippings[t].respectfulSkippings.map(e=>({studentName:this.students.find(t=>t._id===e).studentName,_id:e}))],disrespectfulStudentObjects:[...this.skipping.skippings[t].disrespectfulSkippings.map(e=>({studentName:this.students.find(t=>t._id===e).studentName,_id:e}))]}),this.respectfulDropdown.toArray()[t].availableItems=[],this.disrespectfulDropdown.toArray()[t].availableItems=[]}),e.unsubscribe()});this.showSkippings(this.schedule),this.skippingForm.patchValue({date:this.schedule.regionalDate})}createSkipping(){return this.fb.group({id:["",o.o.required],respectfulStudentObjects:[[]],disrespectfulStudentObjects:[[]]})}showSkippings(e){this.skippingForm.patchValue(e),e.lessons.forEach(e=>{const t=this.createSkipping();t.patchValue(e),this.getSkippings().push(t)})}getSkippings(){return this.skippingForm.get("skippings")}clickVerified(){this.modal.close(this.skipping._id)}}return e.\u0275fac=function(t){return new(t||e)(l.Mb(o.c),l.Mb(N.b),l.Mb(C),l.Mb(w.a),l.Mb(k.a))},e.\u0275cmp=l.Gb({type:e,selectors:[["app-show-skipping"]],viewQuery:function(e,t){var i;1&e&&(l.Mc(O,!0),l.Mc(D,!0)),2&e&&(l.uc(i=l.fc())&&(t.respectfulDropdown=i),l.uc(i=l.fc())&&(t.disrespectfulDropdown=i))},decls:17,vars:3,consts:[[1,"modal-header"],[1,"modal-title"],["type","button",1,"close",3,"click"],["aria-hidden","true"],[1,"modal-body"],[3,"formGroup"],["for","scheduleDate",1,"col-form-label"],["id","scheduleDate","formControlName","date",1,"form-control",2,"margin-bottom","20px"],["formArrayName","skippings"],[4,"ngFor","ngForOf"],[1,"modal-footer"],["type","button","class","btn btn-primary","data-dismiss","modal",3,"click",4,"ngIf"],["type","button","data-dismiss","modal",1,"btn","btn-secondary",3,"click"],[3,"formGroupName"],[1,"row",2,"margin-bottom","10px"],[1,"col"],["for","discipline",1,"col-form-label"],["id","discipline","disabled","",1,"form-control",3,"value"],["for","respectful",1,"col-form-label"],["id","respectful","formControlName","respectfulStudentObjects",3,"options","config","multiple"],["respectfulDropdown",""],["for","disrespectful",1,"col-form-label"],["id","disrespectful","formControlName","disrespectfulStudentObjects",3,"options","config","multiple"],["disrespectfulDropdown",""],["type","button","data-dismiss","modal",1,"btn","btn-primary",3,"click"]],template:function(e,t){1&e&&(l.Sb(0,"div",0),l.Sb(1,"h5",1),l.Gc(2,"\u041f\u0440\u043e\u0441\u043c\u043e\u0442\u0440 \u043f\u0440\u043e\u043f\u0443\u0441\u043a\u0430"),l.Rb(),l.Sb(3,"button",2),l.ec("click",(function(){return t.modal.dismiss()})),l.Sb(4,"span",3),l.Gc(5,"\xd7"),l.Rb(),l.Rb(),l.Rb(),l.Sb(6,"div",4),l.Sb(7,"form",5),l.Sb(8,"label",6),l.Gc(9,"\u0414\u0430\u0442\u0430"),l.Rb(),l.Nb(10,"input",7),l.Qb(11,8),l.Ec(12,E,17,8,"ng-container",9),l.Pb(),l.Rb(),l.Rb(),l.Sb(13,"div",10),l.Ec(14,M,2,0,"button",11),l.Sb(15,"button",12),l.ec("click",(function(){return t.modal.dismiss()})),l.Gc(16,"\u0417\u0430\u043a\u0440\u044b\u0442\u044c"),l.Rb(),l.Rb()),2&e&&(l.zb(7),l.nc("formGroup",t.skippingForm),l.zb(5),l.nc("ngForOf",t.schedule.lessons),l.zb(2),l.nc("ngIf",t.authService.isDepartmentHead()&&!t.readOnly))},directives:[o.q,o.k,o.e,o.a,o.j,o.d,o.b,s.m,s.n,o.f,m.a],styles:[""]}),e})(),P=(()=>{class e{constructor(e){this.http=e,this.url=x.a.apiUrl+"students"}getByGroupId(e){return this.http.get(this.url+"/by-group-id/"+e)}create(e){return this.http.post(this.url,e)}}return e.\u0275fac=function(t){return new(t||e)(l.ac(z.b))},e.\u0275prov=l.Ib({token:e,factory:e.\u0275fac,providedIn:"root"}),e})();var j=i("KGMU");const Q=["teacherDropdown"];function _(e,t){if(1&e&&(l.Qb(0),l.Sb(1,"span"),l.Gc(2),l.Rb(),l.Pb()),2&e){const e=l.gc(3);l.zb(2),l.Hc(e.group.headmanName)}}function V(e,t){1&e&&(l.Qb(0),l.Sb(1,"span",53),l.Gc(2,"\u0421\u0442\u0430\u0440\u043e\u0441\u0442\u0430 \u0433\u0440\u0443\u043f\u043f\u044b \u043d\u0435 \u0432\u044b\u0431\u0440\u0430\u043d"),l.Rb(),l.Pb())}function q(e,t){if(1&e&&(l.Qb(0),l.Sb(1,"span",54),l.Gc(2),l.Rb(),l.Pb()),2&e){const e=t.$implicit;l.zb(2),l.Hc(e.disciplineName)}}function T(e,t){if(1&e&&(l.Qb(0),l.Sb(1,"span"),l.Sb(2,"b"),l.Gc(3,"\u0414\u0438\u0441\u0446\u0438\u043f\u043b\u0438\u043d\u044b"),l.Rb(),l.Rb(),l.Nb(4,"br"),l.Ec(5,q,3,1,"ng-container",35),l.Pb()),2&e){const e=l.gc(3);l.zb(5),l.nc("ngForOf",e.disciplines)}}function $(e,t){if(1&e&&(l.Sb(0,"div",51),l.Sb(1,"div",52),l.Sb(2,"span"),l.Sb(3,"b"),l.Gc(4,"\u0421\u043f\u0435\u0446\u0438\u0430\u043b\u044c\u043d\u043e\u0441\u0442\u044c"),l.Rb(),l.Rb(),l.Nb(5,"br"),l.Sb(6,"span"),l.Gc(7),l.Rb(),l.Rb(),l.Sb(8,"div",52),l.Sb(9,"span"),l.Sb(10,"b"),l.Gc(11,"\u041d\u043e\u043c\u0435\u0440 \u0433\u0440\u0443\u043f\u043f\u044b"),l.Rb(),l.Rb(),l.Nb(12,"br"),l.Sb(13,"span"),l.Gc(14),l.Rb(),l.Rb(),l.Rb(),l.Sb(15,"div",51),l.Sb(16,"div",52),l.Sb(17,"span"),l.Sb(18,"b"),l.Gc(19,"\u041a\u0443\u0440\u0430\u0442\u043e\u0440"),l.Rb(),l.Rb(),l.Nb(20,"br"),l.Sb(21,"span"),l.Gc(22),l.Rb(),l.Rb(),l.Sb(23,"div",52),l.Sb(24,"span"),l.Sb(25,"b"),l.Gc(26,"\u0421\u0442\u0430\u0440\u043e\u0441\u0442\u0430"),l.Rb(),l.Rb(),l.Nb(27,"br"),l.Ec(28,_,3,1,"ng-container",0),l.Ec(29,V,3,0,"ng-container",0),l.Rb(),l.Rb(),l.Ec(30,T,6,1,"ng-container",0)),2&e){const e=l.gc(2);l.zb(7),l.Hc(e.group.specialtyName),l.zb(7),l.Hc(e.group.groupNumber),l.zb(8),l.Hc(e.group.curatorName),l.zb(6),l.nc("ngIf",e.group.headmanName),l.zb(1),l.nc("ngIf",!e.group.headmanName),l.zb(1),l.nc("ngIf",e.disciplines)}}function B(e,t){if(1&e&&(l.Sb(0,"button",55),l.Sb(1,"span"),l.Gc(2,"\u0414\u043e\u0431\u0430\u0432\u0438\u0442\u044c "),l.Nb(3,"i",56),l.Rb(),l.Rb(),l.Nb(4,"app-table",57)),2&e){const e=l.gc(2);l.zb(4),l.nc("contents",e.toObservable(e.students))("contentFields",e.studentContentFields)("headerNames",e.studentsHeaderNames)}}function L(e,t){if(1&e){const e=l.Tb();l.Sb(0,"button",61),l.ec("click",(function(){l.xc(e);const i=t.$implicit;return l.gc(4).showSchedule(i)})),l.Gc(1),l.Rb()}if(2&e){const e=t.$implicit;l.Eb("btn-danger",!e.isVerified)("btn-success",e.isVerified),l.zb(1),l.Hc(e.regionalDate)}}function H(e,t){if(1&e){const e=l.Tb();l.Qb(0),l.Sb(1,"button",58),l.ec("click",(function(){return l.xc(e),l.gc(3).openAddSchedule()})),l.Sb(2,"span"),l.Gc(3,"\u0414\u043e\u0431\u0430\u0432\u0438\u0442\u044c "),l.Nb(4,"i",56),l.Rb(),l.Rb(),l.Sb(5,"div",59),l.Ec(6,L,2,5,"button",60),l.Rb(),l.Pb()}if(2&e){const e=l.gc(3);l.zb(6),l.nc("ngForOf",e.schedules)}}function K(e,t){if(1&e&&l.Ec(0,H,7,1,"ng-container",0),2&e){const e=l.gc(2);l.nc("ngIf",e.schedules)}}function J(e,t){if(1&e){const e=l.Tb();l.Sb(0,"button",64),l.ec("click",(function(){l.xc(e);const i=t.$implicit;return l.gc(4).openAddSkippingModal(i)})),l.Gc(1),l.Rb()}if(2&e){const e=t.$implicit;l.zb(1),l.Hc(e.regionalDate)}}function U(e,t){if(1&e&&(l.Qb(0),l.Sb(1,"div",59),l.Ec(2,J,2,1,"button",63),l.Rb(),l.Pb()),2&e){const e=l.gc(3);l.zb(2),l.nc("ngForOf",e.noMarkedSchedules)}}function X(e,t){if(1&e){const e=l.Tb();l.Sb(0,"button",64),l.ec("click",(function(){l.xc(e);const i=t.$implicit;return l.gc(4).openVerificationSkippingModal(i)})),l.Gc(1),l.Rb()}if(2&e){const e=t.$implicit;l.zb(1),l.Hc(e.regionalDate)}}function W(e,t){if(1&e&&(l.Qb(0),l.Sb(1,"div",59),l.Ec(2,X,2,1,"button",63),l.Rb(),l.Pb()),2&e){const e=l.gc(3);l.zb(2),l.nc("ngForOf",e.noVerifiedSchedules)}}function Z(e,t){if(1&e){const e=l.Tb();l.Sb(0,"button",64),l.ec("click",(function(){l.xc(e);const i=t.$implicit;return l.gc(4).openShowSkippingModal(i)})),l.Gc(1),l.Rb()}if(2&e){const e=t.$implicit;l.zb(1),l.Hc(e.regionalDate)}}function Y(e,t){if(1&e&&(l.Qb(0),l.Sb(1,"div",59),l.Ec(2,Z,2,1,"button",63),l.Rb(),l.Pb()),2&e){const e=l.gc(3);l.zb(2),l.nc("ngForOf",e.verifiedSchedules)}}function ee(e,t){if(1&e&&(l.Sb(0,"div"),l.Sb(1,"p"),l.Sb(2,"span"),l.Sb(3,"b"),l.Gc(4,"\u041d\u0435 \u043e\u0442\u043c\u0435\u0447\u0435\u043d\u043d\u044b\u0435"),l.Rb(),l.Rb(),l.Rb(),l.Ec(5,U,3,1,"ng-container",62),l.Rb(),l.Sb(6,"div"),l.Sb(7,"p"),l.Sb(8,"span"),l.Sb(9,"b"),l.Gc(10,"\u041d\u0435 \u043f\u0440\u043e\u0432\u0435\u0440\u0435\u043d\u043d\u044b\u0435 \u0437\u0430\u0432\u0435\u0434\u0443\u044e\u0449\u0438\u043c \u043e\u0442\u0434\u0435\u043b\u0435\u043d\u0438\u0435\u043c"),l.Rb(),l.Rb(),l.Rb(),l.Ec(11,W,3,1,"ng-container",62),l.Rb(),l.Sb(12,"div"),l.Sb(13,"p"),l.Sb(14,"span"),l.Sb(15,"b"),l.Gc(16,"\u041f\u0440\u043e\u0432\u0435\u0440\u0435\u043d\u043d\u044b\u0435"),l.Rb(),l.Rb(),l.Rb(),l.Ec(17,Y,3,1,"ng-container",62),l.Rb()),2&e){const e=l.gc(2),t=l.vc(102);l.zb(5),l.nc("ngIf",e.noMarkedSchedules)("ngIfElse",t),l.zb(6),l.nc("ngIf",e.noVerifiedSchedules)("ngIfElse",t),l.zb(6),l.nc("ngIf",e.verifiedSchedules)("ngIfElse",t)}}function te(e,t){if(1&e){const e=l.Tb();l.Qb(0),l.Sb(1,"div",42),l.Sb(2,"h2",43),l.Sb(3,"span"),l.Gc(4),l.Rb(),l.Sb(5,"i",44),l.ec("click",(function(){return l.xc(e),l.gc().clickEditGroup()})),l.Rb(),l.Rb(),l.Sb(6,"ul",45,46),l.Sb(8,"li",47),l.Sb(9,"a",48),l.Gc(10,"\u041e\u0431\u0449\u0435\u0435"),l.Rb(),l.Ec(11,$,31,6,"ng-template",49),l.Rb(),l.Sb(12,"li",47),l.Sb(13,"a",48),l.Gc(14,"\u0423\u0447\u0430\u0449\u0438\u0435\u0441\u044f"),l.Rb(),l.Ec(15,B,5,3,"ng-template",49),l.Rb(),l.Sb(16,"li",47),l.Sb(17,"a",48),l.Gc(18,"\u0420\u0430\u0441\u043f\u0438\u0441\u0430\u043d\u0438\u0435"),l.Rb(),l.Ec(19,K,1,1,"ng-template",49),l.Rb(),l.Sb(20,"li",47),l.Sb(21,"a",48),l.Gc(22,"\u041f\u0440\u043e\u043f\u0443\u0441\u043a\u0438"),l.Rb(),l.Ec(23,ee,18,6,"ng-template",49),l.Rb(),l.Rb(),l.Nb(24,"div",50),l.Rb(),l.Pb()}if(2&e){const e=l.vc(7),t=l.gc();l.zb(4),l.Jc("\u0413\u0440\u0443\u043f\u043f\u0430: ",t.group.specialtyName,"-",t.group.groupNumber,""),l.zb(4),l.nc("ngbNavItem",1),l.zb(4),l.nc("ngbNavItem",2),l.zb(4),l.nc("ngbNavItem",3),l.zb(4),l.nc("ngbNavItem",4),l.zb(4),l.nc("ngbNavOutlet",e)}}function ie(e,t){if(1&e&&(l.Qb(0),l.Qb(1,65),l.Sb(2,"div",66),l.Sb(3,"div",52),l.Sb(4,"label",67),l.Gc(5,"\u0414\u0438\u0441\u0446\u0438\u043f\u043b\u0438\u043d\u0430"),l.Rb(),l.Nb(6,"input",68),l.Rb(),l.Sb(7,"div",52),l.Sb(8,"label",69),l.Gc(9,"\u041f\u0440\u0435\u043f\u043e\u0434\u0430\u0432\u0430\u0442\u0435\u043b\u044c"),l.Rb(),l.Nb(10,"input",70),l.Rb(),l.Rb(),l.Pb(),l.Pb()),2&e){const e=t.index;l.zb(1),l.nc("formGroupName",e),l.zb(5),l.Ab("disabled",!0),l.zb(4),l.Ab("disabled",!0)}}function se(e,t){if(1&e){const e=l.Tb();l.Qb(0),l.Sb(1,"span",77),l.Sb(2,"i",78),l.ec("click",(function(){l.xc(e);const t=l.gc().index;return l.gc().removeControlById(t)})),l.Rb(),l.Rb(),l.Pb()}}function ne(e,t){if(1&e){const e=l.Tb();l.Qb(0),l.Qb(1,65),l.Sb(2,"div",71),l.Sb(3,"div",52),l.Sb(4,"label",72),l.Gc(5,"\u0414\u0438\u0441\u0446\u0438\u043f\u043b\u0438\u043d\u0430"),l.Rb(),l.Sb(6,"ngx-select-dropdown",73),l.ec("change",(function(i){l.xc(e);const s=t.index;return l.gc().disciplineSelected(i.value,s)})),l.Rb(),l.Rb(),l.Sb(7,"div",52),l.Sb(8,"label",74),l.Gc(9,"\u041f\u0440\u0435\u043f\u043e\u0434\u0430\u0432\u0430\u0442\u0435\u043b\u044c"),l.Rb(),l.Nb(10,"ngx-select-dropdown",75,76),l.Rb(),l.Ec(12,se,3,0,"ng-container",0),l.Rb(),l.Pb(),l.Pb()}if(2&e){const e=t.index,i=l.gc();l.zb(1),l.nc("formGroupName",e),l.zb(5),l.nc("options",i.disciplines)("config",i.disciplineConfig),l.zb(4),l.nc("config",i.teacherConfig),l.zb(2),l.nc("ngIf",0!==e)}}function oe(e,t){1&e&&(l.Sb(0,"span",53),l.Gc(1,"\u041d\u0435\u0442 \u043a\u043e\u043d\u0442\u0435\u043d\u0442\u0430"),l.Rb())}let ce=(()=>{class e{constructor(e,t,i,s,n,c,r,l,a){this.disciplinesService=e,this.studentsService=t,this.groupsService=i,this.schedulesService=s,this.teachersService=n,this.skippingsService=c,this.fb=r,this.modal=l,this.authService=a,this.studentsHeaderNames=["\u0424\u0430\u043c\u0438\u043b\u0438\u044f","\u0418\u043c\u044f","\u041e\u0442\u0447\u0435\u0441\u0442\u0432\u043e"],this.studentContentFields=["lastName","firstName","patronym"],this.studentForm=this.fb.group({firstName:["",o.o.required],lastName:["",o.o.required],patronym:["",o.o.required],groupId:[""]}),this.groupForm=this.fb.group({groupNumber:[{value:"",disabled:!0},o.o.required],specialtyName:[{value:"",disabled:!0},o.o.required],curatorName:[{value:"",disabled:!0},o.o.required],headman:["",o.o.required],disciplines:["",o.o.required]}),this.scheduleForm=this.fb.group({_id:[""],regionalDate:[""],date:["",o.o.required],lessons:this.fb.array([])}),this.disciplineConfig={displayKey:"disciplineName",search:!0,limitTo:3,selectedItems:[],searchPlaceholder:"\u041f\u043e\u0438\u0441\u043a",noResultsFound:"\u041d\u0435 \u043d\u0430\u0439\u0434\u0435\u043d\u043e \u0440\u0435\u0437\u0443\u043b\u044c\u0442\u0430\u0442\u043e\u0432",placeholder:"\u0412\u044b\u0431\u0435\u0440\u0438\u0442\u0435"},this.studentConfig={displayKey:"studentName",search:!0,limitTo:3,selectedItems:[],searchPlaceholder:"\u041f\u043e\u0438\u0441\u043a",noResultsFound:"\u041d\u0435 \u043d\u0430\u0439\u0434\u0435\u043d\u043e \u0440\u0435\u0437\u0443\u043b\u044c\u0442\u0430\u0442\u043e\u0432",placeholder:"\u0412\u044b\u0431\u0435\u0440\u0438\u0442\u0435"},this.teacherConfig={displayKey:"name",search:!0,limitTo:3,selectedItems:[],searchPlaceholder:"\u041f\u043e\u0438\u0441\u043a",noResultsFound:"\u041d\u0435 \u043d\u0430\u0439\u0434\u0435\u043d\u043e \u0440\u0435\u0437\u0443\u043b\u044c\u0442\u0430\u0442\u043e\u0432",placeholder:"\u0412\u044b\u0431\u0435\u0440\u0438\u0442\u0435"}}getLessons(){return this.scheduleForm.get("lessons")}ngOnInit(){}ngOnChanges(e){const t=this.groupsService.getById(this.groupId).pipe(Object(g.a)(e=>this.group=e),Object(h.a)(()=>Object(c.a)({disciplines:this.disciplinesService.getByIds(this.group.disciplineIds),students:this.studentsService.getByGroupId(this.group._id).pipe(Object(S.a)(e=>e),Object(R.a)(e=>(e.studentName=`${e.lastName} ${e.firstName} ${e.patronym}`,e)),Object(v.a)()),schedules:this.schedulesService.getByGroupId(this.group._id)}))).subscribe(({disciplines:e,students:i,schedules:s})=>{this.disciplines=e,this.students=i,this.schedules=s,this.noMarkedSchedules=s.filter(e=>!e.isMarked),this.noVerifiedSchedules=s.filter(e=>e.isMarked&&!e.isVerified),this.verifiedSchedules=s.filter(e=>e.isVerified),t.unsubscribe()})}addStudent(){if(this.studentForm.valid){const e=this.studentForm.value;e.groupId=this.group._id;const t=this.studentsService.create(e).pipe(Object(S.a)(()=>this.studentsService.getByGroupId(this.group._id).pipe(Object(S.a)(e=>e),Object(R.a)(e=>(e.studentName=`${e.lastName} ${e.firstName} ${e.patronym}`,e)),Object(v.a)()))).subscribe(e=>{this.students=e,this.studentForm.reset(),t.unsubscribe()})}}clickEditGroup(){const e=this.disciplinesService.getAll().subscribe(t=>{this.allDisciplines=t,e.unsubscribe()});this.groupForm.patchValue(Object.assign(Object.assign({},this.group),{disciplines:[...this.disciplines],headman:this.students.find(e=>e._id===this.group.headmanId)}))}editGroup(){if(this.groupForm.valid&&this.groupForm.dirty){const e=this.groupForm.value;e._id=this.group._id,e.headmanId=e.headman._id,e.disciplineIds=e.disciplines.map(e=>e._id);const t=this.groupsService.update(e).pipe(Object(h.a)(()=>Object(c.a)({group:this.groupsService.getById(this.groupId),disciplines:this.disciplinesService.getByIds(e.disciplineIds)}))).subscribe(({group:e,disciplines:i})=>{this.group=e,this.disciplines=i,this.groupForm.reset(),t.unsubscribe()})}}toObservable(e){return Object(f.a)(e)}showSchedule(e){this.scheduleForm.patchValue(e),e.lessons.forEach(e=>{const t=this.createLesson();t.patchValue(e),this.getLessons().push(t)})}createLesson(){return this.fb.group({teacherId:[""],disciplineId:[""],teacherName:[""],disciplineName:[""],discipline:["",o.o.required],teacher:[{value:"",disabled:!0},o.o.required]})}removeAllControls(){this.getLessons().controls=[],this.getLessons().patchValue([])}removeControlById(e){this.getLessons().removeAt(e)}openAddSchedule(){this.scheduleForm.get("lessons").push(this.createLesson())}addOneFormGroup(){this.scheduleForm.get("lessons").push(this.createLesson())}disciplineSelected(e,t){if(e){const i=this.teacherDropdown.toArray();i[t].availableItems=[],i[t].selectedItems=[],i[t].selectedDisplayText="";const s=this.teachersService.getByDisciplineId(e._id).subscribe(e=>{this.scheduleForm.get("lessons").controls[t].get("teacher").enable(),i[t].availableItems=e,s.unsubscribe()})}else this.scheduleForm.get("lessons").controls[t].get("teacher").disable()}createSchedule(){if(this.scheduleForm.valid){const e=this.scheduleForm.value;e.groupId=this.groupId,e.lessons.forEach(e=>{e.disciplineId=e.discipline._id,e.teacherId=e.teacher._id});const t=this.schedulesService.create(e).subscribe(()=>{this.ngOnChanges({}),t.unsubscribe()})}this.removeAllControls()}openAddSkippingModal(e){const t=this.modal.open(F,{size:"xl"});t.componentInstance.schedule=e,t.componentInstance.students=this.students,t.result.then(t=>{t.scheduleId=e._id,t.skippings.forEach(e=>{e.respectfulSkippings=[],e.disrespectfulSkippings=[],e.respectfulStudentObjects.forEach(t=>{e.respectfulSkippings.push(t._id)}),e.disrespectfulStudentObjects.forEach(t=>{e.disrespectfulSkippings.push(t._id)})});const i=this.skippingsService.create(t).subscribe(()=>{this.ngOnChanges({}),i.unsubscribe()})}).catch(e=>{console.log(e)})}openVerificationSkippingModal(e){const t=this.modal.open(A,{size:"xl"});t.componentInstance.schedule=e,t.componentInstance.students=this.students,t.result.then(()=>{const t=this.skippingsService.verification(e._id).subscribe(()=>{this.ngOnChanges({}),t.unsubscribe()})}).catch(e=>{console.log(e)})}openShowSkippingModal(e){const t=this.modal.open(A,{size:"xl"});t.componentInstance.schedule=e,t.componentInstance.students=this.students,t.componentInstance.readOnly=!0,t.result.then(()=>{const t=this.skippingsService.verification(e._id).subscribe(()=>{this.ngOnChanges({}),t.unsubscribe()})}).catch(e=>{console.log(e)})}}return e.\u0275fac=function(t){return new(t||e)(l.Mb(p.a),l.Mb(P),l.Mb(a.a),l.Mb(j.a),l.Mb(b.a),l.Mb(C),l.Mb(o.c),l.Mb(k.b),l.Mb(w.a))},e.\u0275cmp=l.Gb({type:e,selectors:[["app-group-details"]],viewQuery:function(e,t){var i;1&e&&l.Mc(Q,!0),2&e&&l.uc(i=l.fc())&&(t.teacherDropdown=i)},inputs:{groupId:"groupId"},features:[l.xb],decls:103,vars:14,consts:[[4,"ngIf"],["tabindex","-1","role","dialog","id","addStudent",1,"modal"],["role","document",1,"modal-dialog"],[1,"modal-content"],[1,"modal-header"],[1,"modal-title"],["type","button","data-dismiss","modal","aria-label","Close",1,"close"],["aria-hidden","true"],[1,"modal-body"],[3,"formGroup"],["for","lastName",1,"col-form-label"],["id","lastName","formControlName","lastName",1,"form-control"],["for","firstName",1,"col-form-label"],["id","firstName","formControlName","firstName",1,"form-control"],["for","patronym",1,"col-form-label"],["id","patronym","formControlName","patronym",1,"form-control"],[1,"modal-footer"],["type","button","data-dismiss","modal",1,"btn","btn-primary",3,"click"],["type","button","data-dismiss","modal",1,"btn","btn-secondary",3,"click"],["tabindex","-1","role","dialog","id","editGroupDialog",1,"modal"],["for","groupNumber",1,"col-form-label"],["id","groupNumber","formControlName","groupNumber",1,"form-control"],["for","specialtyName",1,"col-form-label"],["formControlName","specialtyName","id","specialtyName",1,"form-control"],["for","curatorName",1,"col-form-label"],["formControlName","curatorName","id","curatorName",1,"form-control"],["for","headman",1,"col-form-label"],["formControlName","headman","id","headman",3,"options","config","multiple"],["for","disciplineIds",1,"col-form-label"],["formControlName","disciplines","id","disciplineIds",3,"options","config","multiple"],["tabindex","-1","role","dialog","id","showScheduleDialog",1,"modal"],["type","button","data-dismiss","modal","aria-label","Close",1,"close",3,"click"],["for","scheduleDate",1,"col-form-label"],["id","scheduleDate","formControlName","regionalDate",1,"form-control",2,"margin-bottom","20px"],["formArrayName","lessons"],[4,"ngFor","ngForOf"],["tabindex","-1","role","dialog","id","addScheduleDialog",1,"modal","fade"],["for","scheduleDateForAdd",1,"col-form-label"],["id","scheduleDateForAdd","formControlName","date","type","date",1,"form-control",2,"margin-bottom","20px"],[1,"btn","btn-primary",3,"click"],[2,"margin-left","20px","color","red"],["noContent",""],[1,"d-flex","flex-column"],[1,"d-flex"],["data-toggle","modal","data-target","#editGroupDialog",1,"fa","fa-pen","align-self-center",2,"margin-left","20px","font-size","15px","cursor","pointer",3,"click"],["ngbNav","",1,"nav-tabs",2,"margin-top","20px"],["nav","ngbNav"],[3,"ngbNavItem"],["ngbNavLink",""],["ngbNavContent",""],[1,"mt-2",3,"ngbNavOutlet"],[1,"row",2,"margin","20px -15px"],[1,"col"],[2,"color","red"],[1,"badge","badge-primary",2,"margin-right","10px","font-size","15px"],["data-toggle","modal","data-target","#addStudent",1,"btn","btn-primary",2,"margin","10px 0"],[1,"fa","fa-plus"],[3,"contents","contentFields","headerNames"],["data-toggle","modal","data-target","#addScheduleDialog",1,"btn","btn-primary",2,"margin","10px 0",3,"click"],[1,"list-group"],["class","btn list-group-item list-group-item-action","data-toggle","modal","data-target","#showScheduleDialog",3,"btn-danger","btn-success","click",4,"ngFor","ngForOf"],["data-toggle","modal","data-target","#showScheduleDialog",1,"btn","list-group-item","list-group-item-action",3,"click"],[4,"ngIf","ngIfElse"],["class","btn list-group-item list-group-item-action",3,"click",4,"ngFor","ngForOf"],[1,"btn","list-group-item","list-group-item-action",3,"click"],[3,"formGroupName"],[1,"row"],["for","disciplineName",1,"col-form-label"],["id","disciplineName","formControlName","disciplineName",1,"form-control"],["for","teacherName",1,"col-form-label"],["id","teacherName","formControlName","teacherName",1,"form-control"],[1,"row",2,"margin-bottom","10px"],["for","discipline",1,"col-form-label"],["id","discipline","formControlName","discipline",3,"options","config","change"],["for","teacher",1,"col-form-label"],["id","teacher","formControlName","teacher",3,"config"],["teacherDropdown",""],[1,"d-flex",2,"align-items","flex-end"],[1,"fa","fa-trash",2,"margin-right","10px","margin-bottom","10px","cursor","pointer",3,"click"]],template:function(e,t){1&e&&(l.Ec(0,te,25,7,"ng-container",0),l.Sb(1,"div",1),l.Sb(2,"div",2),l.Sb(3,"div",3),l.Sb(4,"div",4),l.Sb(5,"h5",5),l.Gc(6,"\u0414\u043e\u0431\u0430\u0432\u0438\u0442\u044c \u0441\u0442\u0443\u0434\u0435\u043d\u0442\u0430"),l.Rb(),l.Sb(7,"button",6),l.Sb(8,"span",7),l.Gc(9,"\xd7"),l.Rb(),l.Rb(),l.Rb(),l.Sb(10,"div",8),l.Sb(11,"form",9),l.Sb(12,"label",10),l.Gc(13,"\u0424\u0430\u043c\u0438\u043b\u0438\u044f"),l.Rb(),l.Nb(14,"input",11),l.Sb(15,"label",12),l.Gc(16,"\u0418\u043c\u044f"),l.Rb(),l.Nb(17,"input",13),l.Sb(18,"label",14),l.Gc(19,"\u041e\u0442\u0447\u0435\u0441\u0442\u0432\u043e"),l.Rb(),l.Nb(20,"input",15),l.Rb(),l.Rb(),l.Sb(21,"div",16),l.Sb(22,"button",17),l.ec("click",(function(){return t.addStudent()})),l.Gc(23,"\u0414\u043e\u0431\u0430\u0432\u0438\u0442\u044c"),l.Rb(),l.Sb(24,"button",18),l.ec("click",(function(){return t.studentForm.reset()})),l.Gc(25,"\u041e\u0442\u043c\u0435\u043d\u0438\u0442\u044c"),l.Rb(),l.Rb(),l.Rb(),l.Rb(),l.Rb(),l.Sb(26,"div",19),l.Sb(27,"div",2),l.Sb(28,"div",3),l.Sb(29,"div",4),l.Sb(30,"h5",5),l.Gc(31,"\u0420\u0435\u0434\u0430\u043a\u0442\u0438\u0440\u043e\u0432\u0430\u0442\u044c \u0433\u0440\u0443\u043f\u043f\u0443"),l.Rb(),l.Sb(32,"button",6),l.Sb(33,"span",7),l.Gc(34,"\xd7"),l.Rb(),l.Rb(),l.Rb(),l.Sb(35,"div",8),l.Sb(36,"form",9),l.Sb(37,"label",20),l.Gc(38,"\u041d\u043e\u043c\u0435\u0440 \u0433\u0440\u0443\u043f\u043f\u044b"),l.Rb(),l.Nb(39,"input",21),l.Sb(40,"label",22),l.Gc(41,"\u0421\u043f\u0435\u0446\u0438\u0430\u043b\u044c\u043d\u043e\u0441\u0442\u044c"),l.Rb(),l.Nb(42,"input",23),l.Sb(43,"label",24),l.Gc(44,"\u041a\u0443\u0440\u0430\u0442\u043e\u0440"),l.Rb(),l.Nb(45,"input",25),l.Sb(46,"label",26),l.Gc(47,"\u0421\u0442\u0430\u0440\u043e\u0441\u0442\u0430"),l.Rb(),l.Nb(48,"ngx-select-dropdown",27),l.Sb(49,"label",28),l.Gc(50,"\u0414\u0438\u0441\u0446\u0438\u043f\u043b\u0438\u043d\u044b"),l.Rb(),l.Nb(51,"ngx-select-dropdown",29),l.Rb(),l.Rb(),l.Sb(52,"div",16),l.Sb(53,"button",17),l.ec("click",(function(){return t.editGroup()})),l.Gc(54,"\u0420\u0435\u0434\u0430\u043a\u0442\u0438\u0440\u043e\u0432\u0430\u0442\u044c"),l.Rb(),l.Sb(55,"button",18),l.ec("click",(function(){return t.groupForm.reset({disciplineIds:[]})})),l.Gc(56,"\u041e\u0442\u043c\u0435\u043d\u0438\u0442\u044c"),l.Rb(),l.Rb(),l.Rb(),l.Rb(),l.Rb(),l.Sb(57,"div",30),l.Sb(58,"div",2),l.Sb(59,"div",3),l.Sb(60,"div",4),l.Sb(61,"h5",5),l.Gc(62,"\u041f\u0440\u043e\u0441\u043c\u043e\u0442\u0440 \u0440\u0430\u0441\u043f\u0438\u0441\u0430\u043d\u0438\u044f"),l.Rb(),l.Sb(63,"button",31),l.ec("click",(function(){return t.removeAllControls()})),l.Sb(64,"span",7),l.Gc(65,"\xd7"),l.Rb(),l.Rb(),l.Rb(),l.Sb(66,"div",8),l.Sb(67,"form",9),l.Sb(68,"label",32),l.Gc(69,"\u0414\u0430\u0442\u0430"),l.Rb(),l.Nb(70,"input",33),l.Qb(71,34),l.Ec(72,ie,11,3,"ng-container",35),l.Pb(),l.Rb(),l.Rb(),l.Sb(73,"div",16),l.Sb(74,"button",18),l.ec("click",(function(){return t.removeAllControls()})),l.Gc(75,"\u0417\u0430\u043a\u0440\u044b\u0442\u044c"),l.Rb(),l.Rb(),l.Rb(),l.Rb(),l.Rb(),l.Sb(76,"div",36),l.Sb(77,"div",2),l.Sb(78,"div",3),l.Sb(79,"div",4),l.Sb(80,"h5",5),l.Gc(81,"\u0414\u043e\u0431\u0430\u0432\u0438\u0442\u044c \u0440\u0430\u0441\u043f\u0438\u0441\u0430\u043d\u0438\u044f"),l.Rb(),l.Sb(82,"button",31),l.ec("click",(function(){return t.removeAllControls()})),l.Sb(83,"span",7),l.Gc(84,"\xd7"),l.Rb(),l.Rb(),l.Rb(),l.Sb(85,"div",8),l.Sb(86,"form",9),l.Sb(87,"label",37),l.Gc(88,"\u0414\u0430\u0442\u0430"),l.Rb(),l.Nb(89,"input",38),l.Sb(90,"button",39),l.ec("click",(function(){return t.addOneFormGroup()})),l.Gc(91,"\u0414\u043e\u0431\u0430\u0432\u0438\u0442\u044c"),l.Rb(),l.Sb(92,"span",40),l.Gc(93,"\u041e\u0434\u043d\u0430 \u0441\u0442\u0440\u043e\u0447\u043a\u0430 \u043e\u0442\u0432\u0435\u0447\u0430\u0435\u0442 \u0437\u0430 \u043f\u043e\u043b\u0443\u043f\u0430\u0440\u0443"),l.Rb(),l.Qb(94,34),l.Ec(95,ne,13,5,"ng-container",35),l.Pb(),l.Rb(),l.Rb(),l.Sb(96,"div",16),l.Sb(97,"button",17),l.ec("click",(function(){return t.createSchedule()})),l.Gc(98,"\u0414\u043e\u0431\u0430\u0432\u0438\u0442\u044c"),l.Rb(),l.Sb(99,"button",18),l.ec("click",(function(){return t.removeAllControls()})),l.Gc(100,"\u0417\u0430\u043a\u0440\u044b\u0442\u044c"),l.Rb(),l.Rb(),l.Rb(),l.Rb(),l.Rb(),l.Ec(101,oe,2,0,"ng-template",null,41,l.Fc)),2&e&&(l.nc("ngIf",t.group),l.zb(11),l.nc("formGroup",t.studentForm),l.zb(25),l.nc("formGroup",t.groupForm),l.zb(12),l.nc("options",t.students)("config",t.studentConfig)("multiple",!1),l.zb(3),l.nc("options",t.allDisciplines)("config",t.disciplineConfig)("multiple",!0),l.zb(16),l.nc("formGroup",t.scheduleForm),l.zb(3),l.Ab("disabled",!0),l.zb(2),l.nc("ngForOf",t.getLessons().controls),l.zb(14),l.nc("formGroup",t.scheduleForm),l.zb(9),l.nc("ngForOf",t.getLessons().controls))},directives:[s.n,o.q,o.k,o.e,o.a,o.j,o.d,m.a,o.b,s.m,k.d,k.f,k.g,k.e,k.i,u.a,o.f],styles:[""]}),e})();function re(e,t){if(1&e){const e=l.Tb();l.Qb(0),l.Sb(1,"app-details-panel",25),l.ec("openedChange",(function(t){return l.xc(e),l.gc().sidebarOpened=t})),l.Nb(2,"app-group-details",26),l.Rb(),l.Pb()}if(2&e){const e=l.gc();l.zb(1),l.nc("opened",e.sidebarOpened)("panelClass","EnKlassehar"),l.zb(1),l.nc("groupId",e.selectedGroup._id)}}const le=[{path:"",component:(()=>{class e{constructor(e,t,i,s,n){this.groupsService=e,this.teachersService=t,this.specialtyService=i,this.disciplinesService=s,this.fb=n,this.headerNames=["\u041d\u043e\u043c\u0435\u0440 \u0433\u0440\u0443\u043f\u043f\u044b","\u0421\u043f\u0435\u0446\u0438\u0430\u043b\u044c\u043d\u043e\u0441\u0442\u044c","\u041a\u0443\u0440\u0430\u0442\u043e\u0440"],this.contentFields=["groupNumber","specialtyName","curatorName"],this.groupForm=this.fb.group({groupNumber:["",o.o.required],specialtyId:["",o.o.required],curatorId:["",o.o.required],disciplineIds:["",o.o.required]}),this.disciplineConfig={displayKey:"disciplineName",search:!0,limitTo:3,selectedItems:[],searchPlaceholder:"\u041f\u043e\u0438\u0441\u043a",noResultsFound:"\u041d\u0435 \u043d\u0430\u0439\u0434\u0435\u043d\u043e \u0440\u0435\u0437\u0443\u043b\u044c\u0442\u0430\u0442\u043e\u0432",placeholder:"\u0412\u044b\u0431\u0435\u0440\u0438\u0442\u0435"},this.specialtyConfig={displayKey:"specialtyName",search:!0,limitTo:3,selectedItems:[],searchPlaceholder:"\u041f\u043e\u0438\u0441\u043a",noResultsFound:"\u041d\u0435 \u043d\u0430\u0439\u0434\u0435\u043d\u043e \u0440\u0435\u0437\u0443\u043b\u044c\u0442\u0430\u0442\u043e\u0432",placeholder:"\u0412\u044b\u0431\u0435\u0440\u0438\u0442\u0435"},this.teacherConfig={displayKey:"name",search:!0,limitTo:3,selectedItems:[],searchPlaceholder:"\u041f\u043e\u0438\u0441\u043a",noResultsFound:"\u041d\u0435 \u043d\u0430\u0439\u0434\u0435\u043d\u043e \u0440\u0435\u0437\u0443\u043b\u044c\u0442\u0430\u0442\u043e\u0432",placeholder:"\u0412\u044b\u0431\u0435\u0440\u0438\u0442\u0435"},this.sidebarOpened=!1}ngOnInit(){this.groups=this.groupsService.getAll()}ngAfterViewInit(){this.detailsPanel&&this.detailsPanel.openedChange.subscribe(e=>{this.sidebarOpened=e,e||(this.selectedGroup=null)})}openAddDialog(){const e=Object(c.a)({teachers:this.teachersService.getAvailableAsNewCurator(),specialty:this.specialtyService.getAll(),disciplines:this.disciplinesService.getAll()}).subscribe(t=>{this.allAvailableTeachers=t.teachers,this.allDisciplines=t.disciplines,this.allSpecialty=t.specialty,e.unsubscribe()})}addGroup(){if(this.groupForm.valid){const e=this.groupForm.value;e.curatorId=e.curatorId._id,e.specialtyId=e.specialtyId._id,e.disciplineIds=e.disciplineIds.map(e=>e._id);const t=this.groupsService.create(e).subscribe(()=>{this.groups=this.groupsService.getAll(),this.groupForm.reset({disciplineIds:[]}),t.unsubscribe()})}}openGroupDetails(e){this.selectedGroup=e,this.sidebarOpened=!0}}return e.\u0275fac=function(t){return new(t||e)(l.Mb(a.a),l.Mb(b.a),l.Mb(d.a),l.Mb(p.a),l.Mb(o.c))},e.\u0275cmp=l.Gb({type:e,selectors:[["app-groups"]],viewQuery:function(e,t){var i;1&e&&l.Mc(r.a,!0),2&e&&l.uc(i=l.fc())&&(t.detailsPanel=i.first)},decls:35,vars:14,consts:[[1,"d-flex","flex-column",2,"margin","20px"],["data-toggle","modal","data-target","#addDialog",1,"btn","btn-primary",2,"height","40px","width","140px","margin-bottom","20px",3,"click"],[1,"fa","fa-plus"],[3,"contents","headerNames","contentFields","clickContent"],[4,"ngIf"],["tabindex","-1","role","dialog","id","addDialog",1,"modal"],["role","document",1,"modal-dialog"],[1,"modal-content"],[1,"modal-header"],[1,"modal-title"],["type","button","data-dismiss","modal","aria-label","Close",1,"close"],["aria-hidden","true"],[1,"modal-body"],[3,"formGroup"],["for","groupNumber",1,"col-form-label"],["id","groupNumber","formControlName","groupNumber",1,"form-control"],["for","specialtyId",1,"col-form-label"],["formControlName","specialtyId","id","specialtyId",3,"options","config","multiple"],["for","curatorId",1,"col-form-label"],["formControlName","curatorId","id","curatorId",3,"options","config","multiple"],["for","disciplineIds",1,"col-form-label"],["formControlName","disciplineIds","id","disciplineIds",3,"options","config","multiple"],[1,"modal-footer"],["type","button","data-dismiss","modal",1,"btn","btn-primary",3,"click"],["type","button","data-dismiss","modal",1,"btn","btn-secondary",3,"click"],[3,"opened","panelClass","openedChange"],[3,"groupId"]],template:function(e,t){1&e&&(l.Sb(0,"div",0),l.Sb(1,"button",1),l.ec("click",(function(){return t.openAddDialog()})),l.Sb(2,"span"),l.Gc(3,"\u0414\u043e\u0431\u0430\u0432\u0438\u0442\u044c "),l.Nb(4,"i",2),l.Rb(),l.Rb(),l.Sb(5,"app-table",3),l.ec("clickContent",(function(e){return t.openGroupDetails(e)})),l.Rb(),l.Rb(),l.Ec(6,re,3,3,"ng-container",4),l.Sb(7,"div",5),l.Sb(8,"div",6),l.Sb(9,"div",7),l.Sb(10,"div",8),l.Sb(11,"h5",9),l.Gc(12,"\u0414\u043e\u0431\u0430\u0432\u0438\u0442\u044c \u0433\u0440\u0443\u043f\u043f\u0443"),l.Rb(),l.Sb(13,"button",10),l.Sb(14,"span",11),l.Gc(15,"\xd7"),l.Rb(),l.Rb(),l.Rb(),l.Sb(16,"div",12),l.Sb(17,"form",13),l.Sb(18,"label",14),l.Gc(19,"\u041d\u043e\u043c\u0435\u0440 \u0433\u0440\u0443\u043f\u043f\u044b"),l.Rb(),l.Nb(20,"input",15),l.Sb(21,"label",16),l.Gc(22,"\u0421\u043f\u0435\u0446\u0438\u0430\u043b\u044c\u043d\u043e\u0441\u0442\u044c"),l.Rb(),l.Nb(23,"ngx-select-dropdown",17),l.Sb(24,"label",18),l.Gc(25,"\u041a\u0443\u0440\u0430\u0442\u043e\u0440"),l.Rb(),l.Nb(26,"ngx-select-dropdown",19),l.Sb(27,"label",20),l.Gc(28,"\u0414\u0438\u0441\u0446\u0438\u043f\u043b\u0438\u043d\u044b"),l.Rb(),l.Nb(29,"ngx-select-dropdown",21),l.Rb(),l.Rb(),l.Sb(30,"div",22),l.Sb(31,"button",23),l.ec("click",(function(){return t.addGroup()})),l.Gc(32,"\u0414\u043e\u0431\u0430\u0432\u0438\u0442\u044c"),l.Rb(),l.Sb(33,"button",24),l.ec("click",(function(){return t.groupForm.reset({disciplineIds:[]})})),l.Gc(34,"\u041e\u0442\u043c\u0435\u043d\u0438\u0442\u044c"),l.Rb(),l.Rb(),l.Rb(),l.Rb(),l.Rb()),2&e&&(l.zb(5),l.nc("contents",t.groups)("headerNames",t.headerNames)("contentFields",t.contentFields),l.zb(1),l.nc("ngIf",t.selectedGroup),l.zb(11),l.nc("formGroup",t.groupForm),l.zb(6),l.nc("options",t.allSpecialty)("config",t.specialtyConfig)("multiple",!1),l.zb(3),l.nc("options",t.allAvailableTeachers)("config",t.teacherConfig)("multiple",!1),l.zb(3),l.nc("options",t.allDisciplines)("config",t.disciplineConfig)("multiple",!0))},directives:[u.a,s.n,o.q,o.k,o.e,o.a,o.j,o.d,m.a,r.a,ce],styles:[""]}),e})()}];let ae=(()=>{class e{}return e.\u0275mod=l.Kb({type:e}),e.\u0275inj=l.Jb({factory:function(t){return new(t||e)},imports:[[n.d.forChild(le)],n.d]}),e})();var be=i("PCNd");let de=(()=>{class e{}return e.\u0275mod=l.Kb({type:e}),e.\u0275inj=l.Jb({factory:function(t){return new(t||e)},imports:[[s.c,ae,be.a,o.n,m.b,k.h]]}),e})()}}]);