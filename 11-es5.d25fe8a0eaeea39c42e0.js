function _toConsumableArray(e){return _arrayWithoutHoles(e)||_iterableToArray(e)||_unsupportedIterableToArray(e)||_nonIterableSpread()}function _nonIterableSpread(){throw new TypeError("Invalid attempt to spread non-iterable instance.\nIn order to be iterable, non-array objects must have a [Symbol.iterator]() method.")}function _unsupportedIterableToArray(e,t){if(e){if("string"==typeof e)return _arrayLikeToArray(e,t);var i=Object.prototype.toString.call(e).slice(8,-1);return"Object"===i&&e.constructor&&(i=e.constructor.name),"Map"===i||"Set"===i?Array.from(e):"Arguments"===i||/^(?:Ui|I)nt(?:8|16|32)(?:Clamped)?Array$/.test(i)?_arrayLikeToArray(e,t):void 0}}function _iterableToArray(e){if("undefined"!=typeof Symbol&&Symbol.iterator in Object(e))return Array.from(e)}function _arrayWithoutHoles(e){if(Array.isArray(e))return _arrayLikeToArray(e)}function _arrayLikeToArray(e,t){(null==t||t>e.length)&&(t=e.length);for(var i=0,n=new Array(t);i<t;i++)n[i]=e[i];return n}function _classCallCheck(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}function _defineProperties(e,t){for(var i=0;i<t.length;i++){var n=t[i];n.enumerable=n.enumerable||!1,n.configurable=!0,"value"in n&&(n.writable=!0),Object.defineProperty(e,n.key,n)}}function _createClass(e,t,i){return t&&_defineProperties(e.prototype,t),i&&_defineProperties(e,i),e}(window.webpackJsonp=window.webpackJsonp||[]).push([[11],{zOVB:function(e,t,i){"use strict";i.r(t),i.d(t,"GroupsModule",(function(){return Se}));var n=i("ofXK"),o=i("tyNb"),r=i("3Pt+"),c=i("cp0P"),s=i("dq/x"),a=i("fXoL"),l=i("hMga"),b=i("TqRN"),u=i("GzUj"),d=i("zivW"),p=i("Xv+k"),f=i("8bGj"),m=i("LRne"),g=i("vkgz"),h=i("bOdf"),v=i("5+tZ"),S=i("lJxs"),y=i("IAdc"),R=i("5eHb"),k=i("1kSV"),N=["respectfulDropdown"],G=["disrespectfulDropdown"];function I(e,t){if(1&e){var i=a.Tb();a.Qb(0),a.Qb(1,13),a.Sb(2,"div",14),a.Sb(3,"div",15),a.Sb(4,"label",16),a.Gc(5,"\u0414\u0438\u0441\u0446\u0438\u043f\u043b\u0438\u043d\u0430"),a.Rb(),a.Nb(6,"input",17),a.Rb(),a.Sb(7,"div",15),a.Sb(8,"label",18),a.Gc(9,"\u0423\u0432\u0430\u0436\u0438\u0442\u0435\u043b\u044c\u043d\u044b\u0435 \u043f\u0440\u043e\u043f\u0443\u0441\u043a\u0438"),a.Rb(),a.Sb(10,"ngx-select-dropdown",19,20),a.ec("change",(function(e){a.xc(i);var n=t.index;return a.gc().changeRespectful(e.value,n)})),a.Rb(),a.Rb(),a.Sb(12,"div",15),a.Sb(13,"label",21),a.Gc(14,"\u041d\u0435\u0443\u0432\u0430\u0436\u0438\u0442\u0435\u043b\u044c\u043d\u044b\u0435 \u043f\u0440\u043e\u043f\u0443\u0441\u043a\u0438"),a.Rb(),a.Sb(15,"ngx-select-dropdown",22,23),a.ec("change",(function(e){a.xc(i);var n=t.index;return a.gc().changeDisrespectful(e.value,n)})),a.Rb(),a.Rb(),a.Rb(),a.Pb(),a.Pb()}if(2&e){var n=t.$implicit,o=t.index,r=a.gc();a.zb(1),a.nc("formGroupName",o),a.zb(5),a.nc("value",n.disciplineName),a.zb(4),a.nc("options",r.students)("config",r.studentConfig)("multiple",!0),a.zb(5),a.nc("options",r.students)("config",r.studentConfig)("multiple",!0)}}var C,F,w=((C=function(){function e(t,i,n){_classCallCheck(this,e),this.fb=t,this.toasterService=i,this.modal=n,this.skippingForm=this.fb.group({date:[{value:"",disabled:!0}],skippings:this.fb.array([])}),this.studentConfig={displayKey:"studentName",search:!0,limitTo:3,selectedItems:[],searchPlaceholder:"\u041f\u043e\u0438\u0441\u043a",noResultsFound:"\u041d\u0435 \u043d\u0430\u0439\u0434\u0435\u043d\u043e \u0440\u0435\u0437\u0443\u043b\u044c\u0442\u0430\u0442\u043e\u0432",placeholder:"\u0412\u044b\u0431\u0435\u0440\u0438\u0442\u0435"}}return _createClass(e,[{key:"ngOnInit",value:function(){this.showSkippings(this.schedule),this.skippingForm.patchValue({date:this.schedule.regionalDate})}},{key:"createSkipping",value:function(){return this.fb.group({id:["",r.o.required],respectfulStudentObjects:[[]],disrespectfulStudentObjects:[[]]})}},{key:"showSkippings",value:function(e){var t=this;this.skippingForm.patchValue(e),e.lessons.forEach((function(e){var i=t.createSkipping();i.patchValue(e),t.getSkippings().push(i)}))}},{key:"getSkippings",value:function(){return this.skippingForm.get("skippings")}},{key:"changeRespectful",value:function(e,t){var i=this.disrespectfulDropdown.toArray();i[t].availableItems=this.students.filter((function(n){return!e.includes(n)&&!i[t].selectedItems.includes(n)}))}},{key:"changeDisrespectful",value:function(e,t){var i=this.respectfulDropdown.toArray();i[t].availableItems=this.students.filter((function(n){return!e.includes(n)&&!i[t].selectedItems.includes(n)}))}},{key:"clickAdd",value:function(){this.getSkippings().controls.forEach((function(e,t){e.patchValue({id:t})})),this.skippingForm.valid?(this.toasterService.success("\u0424\u043e\u0440\u043c\u0430 \u0432\u0430\u043b\u0438\u0434\u043d\u0430","\u0423\u0441\u043f\u0435\u0445"),this.modal.close(this.skippingForm.value)):this.toasterService.error("\u0424\u043e\u0440\u043c\u0430 \u043d\u0435\u0432\u0430\u043b\u0438\u0434\u043d\u0430","\u041e\u0448\u0438\u0431\u043a\u0430")}}]),e}()).\u0275fac=function(e){return new(e||C)(a.Mb(r.c),a.Mb(R.b),a.Mb(k.a))},C.\u0275cmp=a.Gb({type:C,selectors:[["app-add-skippings"]],viewQuery:function(e,t){var i;1&e&&(a.Mc(N,!0),a.Mc(G,!0)),2&e&&(a.uc(i=a.fc())&&(t.respectfulDropdown=i),a.uc(i=a.fc())&&(t.disrespectfulDropdown=i))},decls:18,vars:2,consts:[[1,"modal-header"],[1,"modal-title"],["type","button",1,"close",3,"click"],["aria-hidden","true"],[1,"modal-body"],[3,"formGroup"],["for","scheduleDate",1,"col-form-label"],["id","scheduleDate","formControlName","date",1,"form-control",2,"margin-bottom","20px"],["formArrayName","skippings"],[4,"ngFor","ngForOf"],[1,"modal-footer"],["type","button","data-dismiss","modal",1,"btn","btn-primary",3,"click"],["type","button","data-dismiss","modal",1,"btn","btn-secondary",3,"click"],[3,"formGroupName"],[1,"row",2,"margin-bottom","10px"],[1,"col"],["for","discipline",1,"col-form-label"],["id","discipline","disabled","",1,"form-control",3,"value"],["for","respectful",1,"col-form-label"],["id","respectful","formControlName","respectfulStudentObjects",3,"options","config","multiple","change"],["respectfulDropdown",""],["for","disrespectful",1,"col-form-label"],["id","disrespectful","formControlName","disrespectfulStudentObjects",3,"options","config","multiple","change"],["disrespectfulDropdown",""]],template:function(e,t){1&e&&(a.Sb(0,"div",0),a.Sb(1,"h5",1),a.Gc(2,"\u0414\u043e\u0431\u0430\u0432\u0438\u0442\u044c \u043f\u0440\u043e\u043f\u0443\u0441\u043a\u0438"),a.Rb(),a.Sb(3,"button",2),a.ec("click",(function(){return t.modal.dismiss()})),a.Sb(4,"span",3),a.Gc(5,"\xd7"),a.Rb(),a.Rb(),a.Rb(),a.Sb(6,"div",4),a.Sb(7,"form",5),a.Sb(8,"label",6),a.Gc(9,"\u0414\u0430\u0442\u0430"),a.Rb(),a.Nb(10,"input",7),a.Qb(11,8),a.Ec(12,I,17,8,"ng-container",9),a.Pb(),a.Rb(),a.Rb(),a.Sb(13,"div",10),a.Sb(14,"button",11),a.ec("click",(function(){return t.clickAdd()})),a.Gc(15,"\u0414\u043e\u0431\u0430\u0432\u0438\u0442\u044c"),a.Rb(),a.Sb(16,"button",12),a.ec("click",(function(){return t.modal.dismiss()})),a.Gc(17,"\u0417\u0430\u043a\u0440\u044b\u0442\u044c"),a.Rb(),a.Rb()),2&e&&(a.zb(7),a.nc("formGroup",t.skippingForm),a.zb(5),a.nc("ngForOf",t.schedule.lessons))},directives:[r.q,r.k,r.e,r.a,r.j,r.d,r.b,n.m,r.f,f.a],styles:[""]}),C),x=i("AytR"),z=i("tk/3"),O=((F=function(){function e(t){_classCallCheck(this,e),this.http=t,this.url=x.a.apiUrl+"skippings"}return _createClass(e,[{key:"create",value:function(e){return this.http.post(this.url,e)}},{key:"getByScheduleId",value:function(e){return this.http.get(this.url+"/by-schedule-id/"+e)}},{key:"verification",value:function(e){return this.http.get(this.url+"/verification/"+e)}}]),e}()).\u0275fac=function(e){return new(e||F)(a.ac(z.b))},F.\u0275prov=a.Ib({token:F,factory:F.\u0275fac,providedIn:"root"}),F),_=i("lGQG"),A=["respectfulDropdown"],D=["disrespectfulDropdown"];function E(e,t){if(1&e&&(a.Qb(0),a.Qb(1,13),a.Sb(2,"div",14),a.Sb(3,"div",15),a.Sb(4,"label",16),a.Gc(5,"\u0414\u0438\u0441\u0446\u0438\u043f\u043b\u0438\u043d\u0430"),a.Rb(),a.Nb(6,"input",17),a.Rb(),a.Sb(7,"div",15),a.Sb(8,"label",18),a.Gc(9,"\u0423\u0432\u0430\u0436\u0438\u0442\u0435\u043b\u044c\u043d\u044b\u0435 \u043f\u0440\u043e\u043f\u0443\u0441\u043a\u0438"),a.Rb(),a.Nb(10,"ngx-select-dropdown",19,20),a.Rb(),a.Sb(12,"div",15),a.Sb(13,"label",21),a.Gc(14,"\u041d\u0435\u0443\u0432\u0430\u0436\u0438\u0442\u0435\u043b\u044c\u043d\u044b\u0435 \u043f\u0440\u043e\u043f\u0443\u0441\u043a\u0438"),a.Rb(),a.Nb(15,"ngx-select-dropdown",22,23),a.Rb(),a.Rb(),a.Pb(),a.Pb()),2&e){var i=t.$implicit,n=t.index,o=a.gc();a.zb(1),a.nc("formGroupName",n),a.zb(5),a.nc("value",i.disciplineName),a.zb(4),a.nc("options",o.students)("config",o.studentConfig)("multiple",!0),a.zb(5),a.nc("options",o.students)("config",o.studentConfig)("multiple",!0)}}function M(e,t){if(1&e){var i=a.Tb();a.Sb(0,"button",24),a.ec("click",(function(){return a.xc(i),a.gc().clickVerified()})),a.Gc(1,"\u041e\u0442\u043c\u0435\u0442\u0438\u0442\u044c"),a.Rb()}}var j,P,T=((P=function(){function e(t,i,n,o,r){_classCallCheck(this,e),this.fb=t,this.toasterService=i,this.skippingsService=n,this.authService=o,this.modal=r,this.readOnly=!1,this.skippingForm=this.fb.group({date:[{value:"",disabled:!0}],skippings:this.fb.array([])}),this.studentConfig={displayKey:"studentName",search:!1,limitTo:3,selectedItems:[],searchPlaceholder:"\u041f\u043e\u0438\u0441\u043a",noResultsFound:"\u041d\u0435 \u043d\u0430\u0439\u0434\u0435\u043d\u043e \u0440\u0435\u0437\u0443\u043b\u044c\u0442\u0430\u0442\u043e\u0432",placeholder:"\u0412\u044b\u0431\u0435\u0440\u0438\u0442\u0435"}}return _createClass(e,[{key:"ngOnInit",value:function(){var e=this,t=this.skippingsService.getByScheduleId(this.schedule._id).subscribe((function(i){e.skipping=i,e.getSkippings().controls.forEach((function(t,i){t.patchValue({id:e.skipping.skippings[i].id,respectfulStudentObjects:_toConsumableArray(e.skipping.skippings[i].respectfulSkippings.map((function(t){return{studentName:e.students.find((function(e){return e._id===t})).studentName,_id:t}}))),disrespectfulStudentObjects:_toConsumableArray(e.skipping.skippings[i].disrespectfulSkippings.map((function(t){return{studentName:e.students.find((function(e){return e._id===t})).studentName,_id:t}})))}),e.respectfulDropdown.toArray()[i].availableItems=[],e.disrespectfulDropdown.toArray()[i].availableItems=[]})),t.unsubscribe()}));this.showSkippings(this.schedule),this.skippingForm.patchValue({date:this.schedule.regionalDate})}},{key:"createSkipping",value:function(){return this.fb.group({id:["",r.o.required],respectfulStudentObjects:[[]],disrespectfulStudentObjects:[[]]})}},{key:"showSkippings",value:function(e){var t=this;this.skippingForm.patchValue(e),e.lessons.forEach((function(e){var i=t.createSkipping();i.patchValue(e),t.getSkippings().push(i)}))}},{key:"getSkippings",value:function(){return this.skippingForm.get("skippings")}},{key:"clickVerified",value:function(){this.modal.close(this.skipping._id)}}]),e}()).\u0275fac=function(e){return new(e||P)(a.Mb(r.c),a.Mb(R.b),a.Mb(O),a.Mb(_.a),a.Mb(k.a))},P.\u0275cmp=a.Gb({type:P,selectors:[["app-show-skipping"]],viewQuery:function(e,t){var i;1&e&&(a.Mc(A,!0),a.Mc(D,!0)),2&e&&(a.uc(i=a.fc())&&(t.respectfulDropdown=i),a.uc(i=a.fc())&&(t.disrespectfulDropdown=i))},decls:17,vars:3,consts:[[1,"modal-header"],[1,"modal-title"],["type","button",1,"close",3,"click"],["aria-hidden","true"],[1,"modal-body"],[3,"formGroup"],["for","scheduleDate",1,"col-form-label"],["id","scheduleDate","formControlName","date",1,"form-control",2,"margin-bottom","20px"],["formArrayName","skippings"],[4,"ngFor","ngForOf"],[1,"modal-footer"],["type","button","class","btn btn-primary","data-dismiss","modal",3,"click",4,"ngIf"],["type","button","data-dismiss","modal",1,"btn","btn-secondary",3,"click"],[3,"formGroupName"],[1,"row",2,"margin-bottom","10px"],[1,"col"],["for","discipline",1,"col-form-label"],["id","discipline","disabled","",1,"form-control",3,"value"],["for","respectful",1,"col-form-label"],["id","respectful","formControlName","respectfulStudentObjects",3,"options","config","multiple"],["respectfulDropdown",""],["for","disrespectful",1,"col-form-label"],["id","disrespectful","formControlName","disrespectfulStudentObjects",3,"options","config","multiple"],["disrespectfulDropdown",""],["type","button","data-dismiss","modal",1,"btn","btn-primary",3,"click"]],template:function(e,t){1&e&&(a.Sb(0,"div",0),a.Sb(1,"h5",1),a.Gc(2,"\u041f\u0440\u043e\u0441\u043c\u043e\u0442\u0440 \u043f\u0440\u043e\u043f\u0443\u0441\u043a\u0430"),a.Rb(),a.Sb(3,"button",2),a.ec("click",(function(){return t.modal.dismiss()})),a.Sb(4,"span",3),a.Gc(5,"\xd7"),a.Rb(),a.Rb(),a.Rb(),a.Sb(6,"div",4),a.Sb(7,"form",5),a.Sb(8,"label",6),a.Gc(9,"\u0414\u0430\u0442\u0430"),a.Rb(),a.Nb(10,"input",7),a.Qb(11,8),a.Ec(12,E,17,8,"ng-container",9),a.Pb(),a.Rb(),a.Rb(),a.Sb(13,"div",10),a.Ec(14,M,2,0,"button",11),a.Sb(15,"button",12),a.ec("click",(function(){return t.modal.dismiss()})),a.Gc(16,"\u0417\u0430\u043a\u0440\u044b\u0442\u044c"),a.Rb(),a.Rb()),2&e&&(a.zb(7),a.nc("formGroup",t.skippingForm),a.zb(5),a.nc("ngForOf",t.schedule.lessons),a.zb(2),a.nc("ngIf",t.authService.isDepartmentHead()&&!t.readOnly))},directives:[r.q,r.k,r.e,r.a,r.j,r.d,r.b,n.m,n.n,r.f,f.a],styles:[""]}),P),Q=((j=function(){function e(t){_classCallCheck(this,e),this.http=t,this.url=x.a.apiUrl+"students"}return _createClass(e,[{key:"getByGroupId",value:function(e){return this.http.get(this.url+"/by-group-id/"+e)}},{key:"create",value:function(e){return this.http.post(this.url,e)}}]),e}()).\u0275fac=function(e){return new(e||j)(a.ac(z.b))},j.\u0275prov=a.Ib({token:j,factory:j.\u0275fac,providedIn:"root"}),j),V=i("KGMU"),q=["teacherDropdown"];function L(e,t){if(1&e&&(a.Qb(0),a.Sb(1,"span"),a.Gc(2),a.Rb(),a.Pb()),2&e){var i=a.gc(3);a.zb(2),a.Hc(i.group.headmanName)}}function H(e,t){1&e&&(a.Qb(0),a.Sb(1,"span",53),a.Gc(2,"\u0421\u0442\u0430\u0440\u043e\u0441\u0442\u0430 \u0433\u0440\u0443\u043f\u043f\u044b \u043d\u0435 \u0432\u044b\u0431\u0440\u0430\u043d"),a.Rb(),a.Pb())}function B(e,t){if(1&e&&(a.Qb(0),a.Sb(1,"span",54),a.Gc(2),a.Rb(),a.Pb()),2&e){var i=t.$implicit;a.zb(2),a.Hc(i.disciplineName)}}function K(e,t){if(1&e&&(a.Qb(0),a.Sb(1,"span"),a.Sb(2,"b"),a.Gc(3,"\u0414\u0438\u0441\u0446\u0438\u043f\u043b\u0438\u043d\u044b"),a.Rb(),a.Rb(),a.Nb(4,"br"),a.Ec(5,B,3,1,"ng-container",35),a.Pb()),2&e){var i=a.gc(3);a.zb(5),a.nc("ngForOf",i.disciplines)}}function $(e,t){if(1&e&&(a.Sb(0,"div",51),a.Sb(1,"div",52),a.Sb(2,"span"),a.Sb(3,"b"),a.Gc(4,"\u0421\u043f\u0435\u0446\u0438\u0430\u043b\u044c\u043d\u043e\u0441\u0442\u044c"),a.Rb(),a.Rb(),a.Nb(5,"br"),a.Sb(6,"span"),a.Gc(7),a.Rb(),a.Rb(),a.Sb(8,"div",52),a.Sb(9,"span"),a.Sb(10,"b"),a.Gc(11,"\u041d\u043e\u043c\u0435\u0440 \u0433\u0440\u0443\u043f\u043f\u044b"),a.Rb(),a.Rb(),a.Nb(12,"br"),a.Sb(13,"span"),a.Gc(14),a.Rb(),a.Rb(),a.Rb(),a.Sb(15,"div",51),a.Sb(16,"div",52),a.Sb(17,"span"),a.Sb(18,"b"),a.Gc(19,"\u041a\u0443\u0440\u0430\u0442\u043e\u0440"),a.Rb(),a.Rb(),a.Nb(20,"br"),a.Sb(21,"span"),a.Gc(22),a.Rb(),a.Rb(),a.Sb(23,"div",52),a.Sb(24,"span"),a.Sb(25,"b"),a.Gc(26,"\u0421\u0442\u0430\u0440\u043e\u0441\u0442\u0430"),a.Rb(),a.Rb(),a.Nb(27,"br"),a.Ec(28,L,3,1,"ng-container",0),a.Ec(29,H,3,0,"ng-container",0),a.Rb(),a.Rb(),a.Ec(30,K,6,1,"ng-container",0)),2&e){var i=a.gc(2);a.zb(7),a.Hc(i.group.specialtyName),a.zb(7),a.Hc(i.group.groupNumber),a.zb(8),a.Hc(i.group.curatorName),a.zb(6),a.nc("ngIf",i.group.headmanName),a.zb(1),a.nc("ngIf",!i.group.headmanName),a.zb(1),a.nc("ngIf",i.disciplines)}}function J(e,t){if(1&e&&(a.Sb(0,"button",55),a.Sb(1,"span"),a.Gc(2,"\u0414\u043e\u0431\u0430\u0432\u0438\u0442\u044c "),a.Nb(3,"i",56),a.Rb(),a.Rb(),a.Nb(4,"app-table",57)),2&e){var i=a.gc(2);a.zb(4),a.nc("contents",i.toObservable(i.students))("contentFields",i.studentContentFields)("headerNames",i.studentsHeaderNames)}}function U(e,t){if(1&e){var i=a.Tb();a.Sb(0,"button",61),a.ec("click",(function(){a.xc(i);var e=t.$implicit;return a.gc(4).showSchedule(e)})),a.Gc(1),a.Rb()}if(2&e){var n=t.$implicit;a.Eb("btn-danger",!n.isVerified)("btn-success",n.isVerified),a.zb(1),a.Hc(n.regionalDate)}}function W(e,t){if(1&e){var i=a.Tb();a.Qb(0),a.Sb(1,"button",58),a.ec("click",(function(){return a.xc(i),a.gc(3).openAddSchedule()})),a.Sb(2,"span"),a.Gc(3,"\u0414\u043e\u0431\u0430\u0432\u0438\u0442\u044c "),a.Nb(4,"i",56),a.Rb(),a.Rb(),a.Sb(5,"div",59),a.Ec(6,U,2,5,"button",60),a.Rb(),a.Pb()}if(2&e){var n=a.gc(3);a.zb(6),a.nc("ngForOf",n.schedules)}}function X(e,t){if(1&e&&a.Ec(0,W,7,1,"ng-container",0),2&e){var i=a.gc(2);a.nc("ngIf",i.schedules)}}function Z(e,t){if(1&e){var i=a.Tb();a.Sb(0,"button",64),a.ec("click",(function(){a.xc(i);var e=t.$implicit;return a.gc(4).openAddSkippingModal(e)})),a.Gc(1),a.Rb()}if(2&e){var n=t.$implicit;a.zb(1),a.Hc(n.regionalDate)}}function Y(e,t){if(1&e&&(a.Qb(0),a.Sb(1,"div",59),a.Ec(2,Z,2,1,"button",63),a.Rb(),a.Pb()),2&e){var i=a.gc(3);a.zb(2),a.nc("ngForOf",i.noMarkedSchedules)}}function ee(e,t){if(1&e){var i=a.Tb();a.Sb(0,"button",64),a.ec("click",(function(){a.xc(i);var e=t.$implicit;return a.gc(4).openVerificationSkippingModal(e)})),a.Gc(1),a.Rb()}if(2&e){var n=t.$implicit;a.zb(1),a.Hc(n.regionalDate)}}function te(e,t){if(1&e&&(a.Qb(0),a.Sb(1,"div",59),a.Ec(2,ee,2,1,"button",63),a.Rb(),a.Pb()),2&e){var i=a.gc(3);a.zb(2),a.nc("ngForOf",i.noVerifiedSchedules)}}function ie(e,t){if(1&e){var i=a.Tb();a.Sb(0,"button",64),a.ec("click",(function(){a.xc(i);var e=t.$implicit;return a.gc(4).openShowSkippingModal(e)})),a.Gc(1),a.Rb()}if(2&e){var n=t.$implicit;a.zb(1),a.Hc(n.regionalDate)}}function ne(e,t){if(1&e&&(a.Qb(0),a.Sb(1,"div",59),a.Ec(2,ie,2,1,"button",63),a.Rb(),a.Pb()),2&e){var i=a.gc(3);a.zb(2),a.nc("ngForOf",i.verifiedSchedules)}}function oe(e,t){if(1&e&&(a.Sb(0,"div"),a.Sb(1,"p"),a.Sb(2,"span"),a.Sb(3,"b"),a.Gc(4,"\u041d\u0435 \u043e\u0442\u043c\u0435\u0447\u0435\u043d\u043d\u044b\u0435"),a.Rb(),a.Rb(),a.Rb(),a.Ec(5,Y,3,1,"ng-container",62),a.Rb(),a.Sb(6,"div"),a.Sb(7,"p"),a.Sb(8,"span"),a.Sb(9,"b"),a.Gc(10,"\u041d\u0435 \u043f\u0440\u043e\u0432\u0435\u0440\u0435\u043d\u043d\u044b\u0435 \u0437\u0430\u0432\u0435\u0434\u0443\u044e\u0449\u0438\u043c \u043e\u0442\u0434\u0435\u043b\u0435\u043d\u0438\u0435\u043c"),a.Rb(),a.Rb(),a.Rb(),a.Ec(11,te,3,1,"ng-container",62),a.Rb(),a.Sb(12,"div"),a.Sb(13,"p"),a.Sb(14,"span"),a.Sb(15,"b"),a.Gc(16,"\u041f\u0440\u043e\u0432\u0435\u0440\u0435\u043d\u043d\u044b\u0435"),a.Rb(),a.Rb(),a.Rb(),a.Ec(17,ne,3,1,"ng-container",62),a.Rb()),2&e){var i=a.gc(2),n=a.vc(102);a.zb(5),a.nc("ngIf",i.noMarkedSchedules)("ngIfElse",n),a.zb(6),a.nc("ngIf",i.noVerifiedSchedules)("ngIfElse",n),a.zb(6),a.nc("ngIf",i.verifiedSchedules)("ngIfElse",n)}}function re(e,t){if(1&e){var i=a.Tb();a.Qb(0),a.Sb(1,"div",42),a.Sb(2,"h2",43),a.Sb(3,"span"),a.Gc(4),a.Rb(),a.Sb(5,"i",44),a.ec("click",(function(){return a.xc(i),a.gc().clickEditGroup()})),a.Rb(),a.Rb(),a.Sb(6,"ul",45,46),a.Sb(8,"li",47),a.Sb(9,"a",48),a.Gc(10,"\u041e\u0431\u0449\u0435\u0435"),a.Rb(),a.Ec(11,$,31,6,"ng-template",49),a.Rb(),a.Sb(12,"li",47),a.Sb(13,"a",48),a.Gc(14,"\u0423\u0447\u0430\u0449\u0438\u0435\u0441\u044f"),a.Rb(),a.Ec(15,J,5,3,"ng-template",49),a.Rb(),a.Sb(16,"li",47),a.Sb(17,"a",48),a.Gc(18,"\u0420\u0430\u0441\u043f\u0438\u0441\u0430\u043d\u0438\u0435"),a.Rb(),a.Ec(19,X,1,1,"ng-template",49),a.Rb(),a.Sb(20,"li",47),a.Sb(21,"a",48),a.Gc(22,"\u041f\u0440\u043e\u043f\u0443\u0441\u043a\u0438"),a.Rb(),a.Ec(23,oe,18,6,"ng-template",49),a.Rb(),a.Rb(),a.Nb(24,"div",50),a.Rb(),a.Pb()}if(2&e){var n=a.vc(7),o=a.gc();a.zb(4),a.Jc("\u0413\u0440\u0443\u043f\u043f\u0430: ",o.group.specialtyName,"-",o.group.groupNumber,""),a.zb(4),a.nc("ngbNavItem",1),a.zb(4),a.nc("ngbNavItem",2),a.zb(4),a.nc("ngbNavItem",3),a.zb(4),a.nc("ngbNavItem",4),a.zb(4),a.nc("ngbNavOutlet",n)}}function ce(e,t){if(1&e&&(a.Qb(0),a.Qb(1,65),a.Sb(2,"div",66),a.Sb(3,"div",52),a.Sb(4,"label",67),a.Gc(5,"\u0414\u0438\u0441\u0446\u0438\u043f\u043b\u0438\u043d\u0430"),a.Rb(),a.Nb(6,"input",68),a.Rb(),a.Sb(7,"div",52),a.Sb(8,"label",69),a.Gc(9,"\u041f\u0440\u0435\u043f\u043e\u0434\u0430\u0432\u0430\u0442\u0435\u043b\u044c"),a.Rb(),a.Nb(10,"input",70),a.Rb(),a.Rb(),a.Pb(),a.Pb()),2&e){var i=t.index;a.zb(1),a.nc("formGroupName",i),a.zb(5),a.Ab("disabled",!0),a.zb(4),a.Ab("disabled",!0)}}function se(e,t){if(1&e){var i=a.Tb();a.Qb(0),a.Sb(1,"span",77),a.Sb(2,"i",78),a.ec("click",(function(){a.xc(i);var e=a.gc().index;return a.gc().removeControlById(e)})),a.Rb(),a.Rb(),a.Pb()}}function ae(e,t){if(1&e){var i=a.Tb();a.Qb(0),a.Qb(1,65),a.Sb(2,"div",71),a.Sb(3,"div",52),a.Sb(4,"label",72),a.Gc(5,"\u0414\u0438\u0441\u0446\u0438\u043f\u043b\u0438\u043d\u0430"),a.Rb(),a.Sb(6,"ngx-select-dropdown",73),a.ec("change",(function(e){a.xc(i);var n=t.index;return a.gc().disciplineSelected(e.value,n)})),a.Rb(),a.Rb(),a.Sb(7,"div",52),a.Sb(8,"label",74),a.Gc(9,"\u041f\u0440\u0435\u043f\u043e\u0434\u0430\u0432\u0430\u0442\u0435\u043b\u044c"),a.Rb(),a.Nb(10,"ngx-select-dropdown",75,76),a.Rb(),a.Ec(12,se,3,0,"ng-container",0),a.Rb(),a.Pb(),a.Pb()}if(2&e){var n=t.index,o=a.gc();a.zb(1),a.nc("formGroupName",n),a.zb(5),a.nc("options",o.disciplines)("config",o.disciplineConfig),a.zb(4),a.nc("config",o.teacherConfig),a.zb(2),a.nc("ngIf",0!==n)}}function le(e,t){1&e&&(a.Sb(0,"span",53),a.Gc(1,"\u041d\u0435\u0442 \u043a\u043e\u043d\u0442\u0435\u043d\u0442\u0430"),a.Rb())}var be,ue=((be=function(){function e(t,i,n,o,c,s,a,l,b){_classCallCheck(this,e),this.disciplinesService=t,this.studentsService=i,this.groupsService=n,this.schedulesService=o,this.teachersService=c,this.skippingsService=s,this.fb=a,this.modal=l,this.authService=b,this.studentsHeaderNames=["\u0424\u0430\u043c\u0438\u043b\u0438\u044f","\u0418\u043c\u044f","\u041e\u0442\u0447\u0435\u0441\u0442\u0432\u043e"],this.studentContentFields=["lastName","firstName","patronym"],this.studentForm=this.fb.group({firstName:["",r.o.required],lastName:["",r.o.required],patronym:["",r.o.required],groupId:[""]}),this.groupForm=this.fb.group({groupNumber:[{value:"",disabled:!0},r.o.required],specialtyName:[{value:"",disabled:!0},r.o.required],curatorName:[{value:"",disabled:!0},r.o.required],headman:["",r.o.required],disciplines:["",r.o.required]}),this.scheduleForm=this.fb.group({_id:[""],regionalDate:[""],date:["",r.o.required],lessons:this.fb.array([])}),this.disciplineConfig={displayKey:"disciplineName",search:!0,limitTo:3,selectedItems:[],searchPlaceholder:"\u041f\u043e\u0438\u0441\u043a",noResultsFound:"\u041d\u0435 \u043d\u0430\u0439\u0434\u0435\u043d\u043e \u0440\u0435\u0437\u0443\u043b\u044c\u0442\u0430\u0442\u043e\u0432",placeholder:"\u0412\u044b\u0431\u0435\u0440\u0438\u0442\u0435"},this.studentConfig={displayKey:"studentName",search:!0,limitTo:3,selectedItems:[],searchPlaceholder:"\u041f\u043e\u0438\u0441\u043a",noResultsFound:"\u041d\u0435 \u043d\u0430\u0439\u0434\u0435\u043d\u043e \u0440\u0435\u0437\u0443\u043b\u044c\u0442\u0430\u0442\u043e\u0432",placeholder:"\u0412\u044b\u0431\u0435\u0440\u0438\u0442\u0435"},this.teacherConfig={displayKey:"name",search:!0,limitTo:3,selectedItems:[],searchPlaceholder:"\u041f\u043e\u0438\u0441\u043a",noResultsFound:"\u041d\u0435 \u043d\u0430\u0439\u0434\u0435\u043d\u043e \u0440\u0435\u0437\u0443\u043b\u044c\u0442\u0430\u0442\u043e\u0432",placeholder:"\u0412\u044b\u0431\u0435\u0440\u0438\u0442\u0435"}}return _createClass(e,[{key:"getLessons",value:function(){return this.scheduleForm.get("lessons")}},{key:"ngOnInit",value:function(){}},{key:"ngOnChanges",value:function(e){var t=this,i=this.groupsService.getById(this.groupId).pipe(Object(g.a)((function(e){return t.group=e})),Object(h.a)((function(){return Object(c.a)({disciplines:t.disciplinesService.getByIds(t.group.disciplineIds),students:t.studentsService.getByGroupId(t.group._id).pipe(Object(v.a)((function(e){return e})),Object(S.a)((function(e){return e.studentName="".concat(e.lastName," ").concat(e.firstName," ").concat(e.patronym),e})),Object(y.a)()),schedules:t.schedulesService.getByGroupId(t.group._id)})}))).subscribe((function(e){var n=e.disciplines,o=e.students,r=e.schedules;t.disciplines=n,t.students=o,t.schedules=r,t.noMarkedSchedules=r.filter((function(e){return!e.isMarked})),t.noVerifiedSchedules=r.filter((function(e){return e.isMarked&&!e.isVerified})),t.verifiedSchedules=r.filter((function(e){return e.isVerified})),i.unsubscribe()}))}},{key:"addStudent",value:function(){var e=this;if(this.studentForm.valid){var t=this.studentForm.value;t.groupId=this.group._id;var i=this.studentsService.create(t).pipe(Object(v.a)((function(){return e.studentsService.getByGroupId(e.group._id).pipe(Object(v.a)((function(e){return e})),Object(S.a)((function(e){return e.studentName="".concat(e.lastName," ").concat(e.firstName," ").concat(e.patronym),e})),Object(y.a)())}))).subscribe((function(t){e.students=t,e.studentForm.reset(),i.unsubscribe()}))}}},{key:"clickEditGroup",value:function(){var e=this,t=this.disciplinesService.getAll().subscribe((function(i){e.allDisciplines=i,t.unsubscribe()}));this.groupForm.patchValue(Object.assign(Object.assign({},this.group),{disciplines:_toConsumableArray(this.disciplines),headman:this.students.find((function(t){return t._id===e.group.headmanId}))}))}},{key:"editGroup",value:function(){var e=this;if(this.groupForm.valid&&this.groupForm.dirty){var t=this.groupForm.value;t._id=this.group._id,t.headmanId=t.headman._id,t.disciplineIds=t.disciplines.map((function(e){return e._id}));var i=this.groupsService.update(t).pipe(Object(h.a)((function(){return Object(c.a)({group:e.groupsService.getById(e.groupId),disciplines:e.disciplinesService.getByIds(t.disciplineIds)})}))).subscribe((function(t){var n=t.group,o=t.disciplines;e.group=n,e.disciplines=o,e.groupForm.reset(),i.unsubscribe()}))}}},{key:"toObservable",value:function(e){return Object(m.a)(e)}},{key:"showSchedule",value:function(e){var t=this;this.scheduleForm.patchValue(e),e.lessons.forEach((function(e){var i=t.createLesson();i.patchValue(e),t.getLessons().push(i)}))}},{key:"createLesson",value:function(){return this.fb.group({teacherId:[""],disciplineId:[""],teacherName:[""],disciplineName:[""],discipline:["",r.o.required],teacher:[{value:"",disabled:!0},r.o.required]})}},{key:"removeAllControls",value:function(){this.getLessons().controls=[],this.getLessons().patchValue([])}},{key:"removeControlById",value:function(e){this.getLessons().removeAt(e)}},{key:"openAddSchedule",value:function(){this.scheduleForm.get("lessons").push(this.createLesson())}},{key:"addOneFormGroup",value:function(){this.scheduleForm.get("lessons").push(this.createLesson())}},{key:"disciplineSelected",value:function(e,t){var i=this;if(e){var n=this.teacherDropdown.toArray();n[t].availableItems=[],n[t].selectedItems=[],n[t].selectedDisplayText="";var o=this.teachersService.getByDisciplineId(e._id).subscribe((function(e){i.scheduleForm.get("lessons").controls[t].get("teacher").enable(),n[t].availableItems=e,o.unsubscribe()}))}else this.scheduleForm.get("lessons").controls[t].get("teacher").disable()}},{key:"createSchedule",value:function(){var e=this;if(this.scheduleForm.valid){var t=this.scheduleForm.value;t.groupId=this.groupId,t.lessons.forEach((function(e){e.disciplineId=e.discipline._id,e.teacherId=e.teacher._id}));var i=this.schedulesService.create(t).subscribe((function(){e.ngOnChanges({}),i.unsubscribe()}))}this.removeAllControls()}},{key:"openAddSkippingModal",value:function(e){var t=this,i=this.modal.open(w,{size:"xl"});i.componentInstance.schedule=e,i.componentInstance.students=this.students,i.result.then((function(i){i.scheduleId=e._id,i.skippings.forEach((function(e){e.respectfulSkippings=[],e.disrespectfulSkippings=[],e.respectfulStudentObjects.forEach((function(t){e.respectfulSkippings.push(t._id)})),e.disrespectfulStudentObjects.forEach((function(t){e.disrespectfulSkippings.push(t._id)}))}));var n=t.skippingsService.create(i).subscribe((function(){t.ngOnChanges({}),n.unsubscribe()}))})).catch((function(e){console.log(e)}))}},{key:"openVerificationSkippingModal",value:function(e){var t=this,i=this.modal.open(T,{size:"xl"});i.componentInstance.schedule=e,i.componentInstance.students=this.students,i.result.then((function(){var i=t.skippingsService.verification(e._id).subscribe((function(){t.ngOnChanges({}),i.unsubscribe()}))})).catch((function(e){console.log(e)}))}},{key:"openShowSkippingModal",value:function(e){var t=this,i=this.modal.open(T,{size:"xl"});i.componentInstance.schedule=e,i.componentInstance.students=this.students,i.componentInstance.readOnly=!0,i.result.then((function(){var i=t.skippingsService.verification(e._id).subscribe((function(){t.ngOnChanges({}),i.unsubscribe()}))})).catch((function(e){console.log(e)}))}}]),e}()).\u0275fac=function(e){return new(e||be)(a.Mb(d.a),a.Mb(Q),a.Mb(l.a),a.Mb(V.a),a.Mb(b.a),a.Mb(O),a.Mb(r.c),a.Mb(k.b),a.Mb(_.a))},be.\u0275cmp=a.Gb({type:be,selectors:[["app-group-details"]],viewQuery:function(e,t){var i;1&e&&a.Mc(q,!0),2&e&&a.uc(i=a.fc())&&(t.teacherDropdown=i)},inputs:{groupId:"groupId"},features:[a.xb],decls:103,vars:14,consts:[[4,"ngIf"],["tabindex","-1","role","dialog","id","addStudent",1,"modal"],["role","document",1,"modal-dialog"],[1,"modal-content"],[1,"modal-header"],[1,"modal-title"],["type","button","data-dismiss","modal","aria-label","Close",1,"close"],["aria-hidden","true"],[1,"modal-body"],[3,"formGroup"],["for","lastName",1,"col-form-label"],["id","lastName","formControlName","lastName",1,"form-control"],["for","firstName",1,"col-form-label"],["id","firstName","formControlName","firstName",1,"form-control"],["for","patronym",1,"col-form-label"],["id","patronym","formControlName","patronym",1,"form-control"],[1,"modal-footer"],["type","button","data-dismiss","modal",1,"btn","btn-primary",3,"click"],["type","button","data-dismiss","modal",1,"btn","btn-secondary",3,"click"],["tabindex","-1","role","dialog","id","editGroupDialog",1,"modal"],["for","groupNumber",1,"col-form-label"],["id","groupNumber","formControlName","groupNumber",1,"form-control"],["for","specialtyName",1,"col-form-label"],["formControlName","specialtyName","id","specialtyName",1,"form-control"],["for","curatorName",1,"col-form-label"],["formControlName","curatorName","id","curatorName",1,"form-control"],["for","headman",1,"col-form-label"],["formControlName","headman","id","headman",3,"options","config","multiple"],["for","disciplineIds",1,"col-form-label"],["formControlName","disciplines","id","disciplineIds",3,"options","config","multiple"],["tabindex","-1","role","dialog","id","showScheduleDialog",1,"modal"],["type","button","data-dismiss","modal","aria-label","Close",1,"close",3,"click"],["for","scheduleDate",1,"col-form-label"],["id","scheduleDate","formControlName","regionalDate",1,"form-control",2,"margin-bottom","20px"],["formArrayName","lessons"],[4,"ngFor","ngForOf"],["tabindex","-1","role","dialog","id","addScheduleDialog",1,"modal","fade"],["for","scheduleDateForAdd",1,"col-form-label"],["id","scheduleDateForAdd","formControlName","date","type","date",1,"form-control",2,"margin-bottom","20px"],[1,"btn","btn-primary",3,"click"],[2,"margin-left","20px","color","red"],["noContent",""],[1,"d-flex","flex-column"],[1,"d-flex"],["data-toggle","modal","data-target","#editGroupDialog",1,"fa","fa-pen","align-self-center",2,"margin-left","20px","font-size","15px","cursor","pointer",3,"click"],["ngbNav","",1,"nav-tabs",2,"margin-top","20px"],["nav","ngbNav"],[3,"ngbNavItem"],["ngbNavLink",""],["ngbNavContent",""],[1,"mt-2",3,"ngbNavOutlet"],[1,"row",2,"margin","20px -15px"],[1,"col"],[2,"color","red"],[1,"badge","badge-primary",2,"margin-right","10px","font-size","15px"],["data-toggle","modal","data-target","#addStudent",1,"btn","btn-primary",2,"margin","10px 0"],[1,"fa","fa-plus"],[3,"contents","contentFields","headerNames"],["data-toggle","modal","data-target","#addScheduleDialog",1,"btn","btn-primary",2,"margin","10px 0",3,"click"],[1,"list-group"],["class","btn list-group-item list-group-item-action","data-toggle","modal","data-target","#showScheduleDialog",3,"btn-danger","btn-success","click",4,"ngFor","ngForOf"],["data-toggle","modal","data-target","#showScheduleDialog",1,"btn","list-group-item","list-group-item-action",3,"click"],[4,"ngIf","ngIfElse"],["class","btn list-group-item list-group-item-action",3,"click",4,"ngFor","ngForOf"],[1,"btn","list-group-item","list-group-item-action",3,"click"],[3,"formGroupName"],[1,"row"],["for","disciplineName",1,"col-form-label"],["id","disciplineName","formControlName","disciplineName",1,"form-control"],["for","teacherName",1,"col-form-label"],["id","teacherName","formControlName","teacherName",1,"form-control"],[1,"row",2,"margin-bottom","10px"],["for","discipline",1,"col-form-label"],["id","discipline","formControlName","discipline",3,"options","config","change"],["for","teacher",1,"col-form-label"],["id","teacher","formControlName","teacher",3,"config"],["teacherDropdown",""],[1,"d-flex",2,"align-items","flex-end"],[1,"fa","fa-trash",2,"margin-right","10px","margin-bottom","10px","cursor","pointer",3,"click"]],template:function(e,t){1&e&&(a.Ec(0,re,25,7,"ng-container",0),a.Sb(1,"div",1),a.Sb(2,"div",2),a.Sb(3,"div",3),a.Sb(4,"div",4),a.Sb(5,"h5",5),a.Gc(6,"\u0414\u043e\u0431\u0430\u0432\u0438\u0442\u044c \u0441\u0442\u0443\u0434\u0435\u043d\u0442\u0430"),a.Rb(),a.Sb(7,"button",6),a.Sb(8,"span",7),a.Gc(9,"\xd7"),a.Rb(),a.Rb(),a.Rb(),a.Sb(10,"div",8),a.Sb(11,"form",9),a.Sb(12,"label",10),a.Gc(13,"\u0424\u0430\u043c\u0438\u043b\u0438\u044f"),a.Rb(),a.Nb(14,"input",11),a.Sb(15,"label",12),a.Gc(16,"\u0418\u043c\u044f"),a.Rb(),a.Nb(17,"input",13),a.Sb(18,"label",14),a.Gc(19,"\u041e\u0442\u0447\u0435\u0441\u0442\u0432\u043e"),a.Rb(),a.Nb(20,"input",15),a.Rb(),a.Rb(),a.Sb(21,"div",16),a.Sb(22,"button",17),a.ec("click",(function(){return t.addStudent()})),a.Gc(23,"\u0414\u043e\u0431\u0430\u0432\u0438\u0442\u044c"),a.Rb(),a.Sb(24,"button",18),a.ec("click",(function(){return t.studentForm.reset()})),a.Gc(25,"\u041e\u0442\u043c\u0435\u043d\u0438\u0442\u044c"),a.Rb(),a.Rb(),a.Rb(),a.Rb(),a.Rb(),a.Sb(26,"div",19),a.Sb(27,"div",2),a.Sb(28,"div",3),a.Sb(29,"div",4),a.Sb(30,"h5",5),a.Gc(31,"\u0420\u0435\u0434\u0430\u043a\u0442\u0438\u0440\u043e\u0432\u0430\u0442\u044c \u0433\u0440\u0443\u043f\u043f\u0443"),a.Rb(),a.Sb(32,"button",6),a.Sb(33,"span",7),a.Gc(34,"\xd7"),a.Rb(),a.Rb(),a.Rb(),a.Sb(35,"div",8),a.Sb(36,"form",9),a.Sb(37,"label",20),a.Gc(38,"\u041d\u043e\u043c\u0435\u0440 \u0433\u0440\u0443\u043f\u043f\u044b"),a.Rb(),a.Nb(39,"input",21),a.Sb(40,"label",22),a.Gc(41,"\u0421\u043f\u0435\u0446\u0438\u0430\u043b\u044c\u043d\u043e\u0441\u0442\u044c"),a.Rb(),a.Nb(42,"input",23),a.Sb(43,"label",24),a.Gc(44,"\u041a\u0443\u0440\u0430\u0442\u043e\u0440"),a.Rb(),a.Nb(45,"input",25),a.Sb(46,"label",26),a.Gc(47,"\u0421\u0442\u0430\u0440\u043e\u0441\u0442\u0430"),a.Rb(),a.Nb(48,"ngx-select-dropdown",27),a.Sb(49,"label",28),a.Gc(50,"\u0414\u0438\u0441\u0446\u0438\u043f\u043b\u0438\u043d\u044b"),a.Rb(),a.Nb(51,"ngx-select-dropdown",29),a.Rb(),a.Rb(),a.Sb(52,"div",16),a.Sb(53,"button",17),a.ec("click",(function(){return t.editGroup()})),a.Gc(54,"\u0420\u0435\u0434\u0430\u043a\u0442\u0438\u0440\u043e\u0432\u0430\u0442\u044c"),a.Rb(),a.Sb(55,"button",18),a.ec("click",(function(){return t.groupForm.reset({disciplineIds:[]})})),a.Gc(56,"\u041e\u0442\u043c\u0435\u043d\u0438\u0442\u044c"),a.Rb(),a.Rb(),a.Rb(),a.Rb(),a.Rb(),a.Sb(57,"div",30),a.Sb(58,"div",2),a.Sb(59,"div",3),a.Sb(60,"div",4),a.Sb(61,"h5",5),a.Gc(62,"\u041f\u0440\u043e\u0441\u043c\u043e\u0442\u0440 \u0440\u0430\u0441\u043f\u0438\u0441\u0430\u043d\u0438\u044f"),a.Rb(),a.Sb(63,"button",31),a.ec("click",(function(){return t.removeAllControls()})),a.Sb(64,"span",7),a.Gc(65,"\xd7"),a.Rb(),a.Rb(),a.Rb(),a.Sb(66,"div",8),a.Sb(67,"form",9),a.Sb(68,"label",32),a.Gc(69,"\u0414\u0430\u0442\u0430"),a.Rb(),a.Nb(70,"input",33),a.Qb(71,34),a.Ec(72,ce,11,3,"ng-container",35),a.Pb(),a.Rb(),a.Rb(),a.Sb(73,"div",16),a.Sb(74,"button",18),a.ec("click",(function(){return t.removeAllControls()})),a.Gc(75,"\u0417\u0430\u043a\u0440\u044b\u0442\u044c"),a.Rb(),a.Rb(),a.Rb(),a.Rb(),a.Rb(),a.Sb(76,"div",36),a.Sb(77,"div",2),a.Sb(78,"div",3),a.Sb(79,"div",4),a.Sb(80,"h5",5),a.Gc(81,"\u0414\u043e\u0431\u0430\u0432\u0438\u0442\u044c \u0440\u0430\u0441\u043f\u0438\u0441\u0430\u043d\u0438\u044f"),a.Rb(),a.Sb(82,"button",31),a.ec("click",(function(){return t.removeAllControls()})),a.Sb(83,"span",7),a.Gc(84,"\xd7"),a.Rb(),a.Rb(),a.Rb(),a.Sb(85,"div",8),a.Sb(86,"form",9),a.Sb(87,"label",37),a.Gc(88,"\u0414\u0430\u0442\u0430"),a.Rb(),a.Nb(89,"input",38),a.Sb(90,"button",39),a.ec("click",(function(){return t.addOneFormGroup()})),a.Gc(91,"\u0414\u043e\u0431\u0430\u0432\u0438\u0442\u044c"),a.Rb(),a.Sb(92,"span",40),a.Gc(93,"\u041e\u0434\u043d\u0430 \u0441\u0442\u0440\u043e\u0447\u043a\u0430 \u043e\u0442\u0432\u0435\u0447\u0430\u0435\u0442 \u0437\u0430 \u043f\u043e\u043b\u0443\u043f\u0430\u0440\u0443"),a.Rb(),a.Qb(94,34),a.Ec(95,ae,13,5,"ng-container",35),a.Pb(),a.Rb(),a.Rb(),a.Sb(96,"div",16),a.Sb(97,"button",17),a.ec("click",(function(){return t.createSchedule()})),a.Gc(98,"\u0414\u043e\u0431\u0430\u0432\u0438\u0442\u044c"),a.Rb(),a.Sb(99,"button",18),a.ec("click",(function(){return t.removeAllControls()})),a.Gc(100,"\u0417\u0430\u043a\u0440\u044b\u0442\u044c"),a.Rb(),a.Rb(),a.Rb(),a.Rb(),a.Rb(),a.Ec(101,le,2,0,"ng-template",null,41,a.Fc)),2&e&&(a.nc("ngIf",t.group),a.zb(11),a.nc("formGroup",t.studentForm),a.zb(25),a.nc("formGroup",t.groupForm),a.zb(12),a.nc("options",t.students)("config",t.studentConfig)("multiple",!1),a.zb(3),a.nc("options",t.allDisciplines)("config",t.disciplineConfig)("multiple",!0),a.zb(16),a.nc("formGroup",t.scheduleForm),a.zb(3),a.Ab("disabled",!0),a.zb(2),a.nc("ngForOf",t.getLessons().controls),a.zb(14),a.nc("formGroup",t.scheduleForm),a.zb(9),a.nc("ngForOf",t.getLessons().controls))},directives:[n.n,r.q,r.k,r.e,r.a,r.j,r.d,f.a,r.b,n.m,k.d,k.f,k.g,k.e,k.i,p.a,r.f],styles:[""]}),be);function de(e,t){if(1&e){var i=a.Tb();a.Qb(0),a.Sb(1,"app-details-panel",25),a.ec("openedChange",(function(e){return a.xc(i),a.gc().sidebarOpened=e})),a.Nb(2,"app-group-details",26),a.Rb(),a.Pb()}if(2&e){var n=a.gc();a.zb(1),a.nc("opened",n.sidebarOpened)("panelClass","EnKlassehar"),a.zb(1),a.nc("groupId",n.selectedGroup._id)}}var pe,fe,me,ge=[{path:"",component:(pe=function(){function e(t,i,n,o,c){_classCallCheck(this,e),this.groupsService=t,this.teachersService=i,this.specialtyService=n,this.disciplinesService=o,this.fb=c,this.headerNames=["\u041d\u043e\u043c\u0435\u0440 \u0433\u0440\u0443\u043f\u043f\u044b","\u0421\u043f\u0435\u0446\u0438\u0430\u043b\u044c\u043d\u043e\u0441\u0442\u044c","\u041a\u0443\u0440\u0430\u0442\u043e\u0440"],this.contentFields=["groupNumber","specialtyName","curatorName"],this.groupForm=this.fb.group({groupNumber:["",r.o.required],specialtyId:["",r.o.required],curatorId:["",r.o.required],disciplineIds:["",r.o.required]}),this.disciplineConfig={displayKey:"disciplineName",search:!0,limitTo:3,selectedItems:[],searchPlaceholder:"\u041f\u043e\u0438\u0441\u043a",noResultsFound:"\u041d\u0435 \u043d\u0430\u0439\u0434\u0435\u043d\u043e \u0440\u0435\u0437\u0443\u043b\u044c\u0442\u0430\u0442\u043e\u0432",placeholder:"\u0412\u044b\u0431\u0435\u0440\u0438\u0442\u0435"},this.specialtyConfig={displayKey:"specialtyName",search:!0,limitTo:3,selectedItems:[],searchPlaceholder:"\u041f\u043e\u0438\u0441\u043a",noResultsFound:"\u041d\u0435 \u043d\u0430\u0439\u0434\u0435\u043d\u043e \u0440\u0435\u0437\u0443\u043b\u044c\u0442\u0430\u0442\u043e\u0432",placeholder:"\u0412\u044b\u0431\u0435\u0440\u0438\u0442\u0435"},this.teacherConfig={displayKey:"name",search:!0,limitTo:3,selectedItems:[],searchPlaceholder:"\u041f\u043e\u0438\u0441\u043a",noResultsFound:"\u041d\u0435 \u043d\u0430\u0439\u0434\u0435\u043d\u043e \u0440\u0435\u0437\u0443\u043b\u044c\u0442\u0430\u0442\u043e\u0432",placeholder:"\u0412\u044b\u0431\u0435\u0440\u0438\u0442\u0435"},this.sidebarOpened=!1}return _createClass(e,[{key:"ngOnInit",value:function(){this.groups=this.groupsService.getAll()}},{key:"ngAfterViewInit",value:function(){var e=this;this.detailsPanel&&this.detailsPanel.openedChange.subscribe((function(t){e.sidebarOpened=t,t||(e.selectedGroup=null)}))}},{key:"openAddDialog",value:function(){var e=this,t=Object(c.a)({teachers:this.teachersService.getAvailableAsNewCurator(),specialty:this.specialtyService.getAll(),disciplines:this.disciplinesService.getAll()}).subscribe((function(i){e.allAvailableTeachers=i.teachers,e.allDisciplines=i.disciplines,e.allSpecialty=i.specialty,t.unsubscribe()}))}},{key:"addGroup",value:function(){var e=this;if(this.groupForm.valid){var t=this.groupForm.value;t.curatorId=t.curatorId._id,t.specialtyId=t.specialtyId._id,t.disciplineIds=t.disciplineIds.map((function(e){return e._id}));var i=this.groupsService.create(t).subscribe((function(){e.groups=e.groupsService.getAll(),e.groupForm.reset({disciplineIds:[]}),i.unsubscribe()}))}}},{key:"openGroupDetails",value:function(e){this.selectedGroup=e,this.sidebarOpened=!0}}]),e}(),pe.\u0275fac=function(e){return new(e||pe)(a.Mb(l.a),a.Mb(b.a),a.Mb(u.a),a.Mb(d.a),a.Mb(r.c))},pe.\u0275cmp=a.Gb({type:pe,selectors:[["app-groups"]],viewQuery:function(e,t){var i;1&e&&a.Mc(s.a,!0),2&e&&a.uc(i=a.fc())&&(t.detailsPanel=i.first)},decls:35,vars:14,consts:[[1,"d-flex","flex-column",2,"margin","20px"],["data-toggle","modal","data-target","#addDialog",1,"btn","btn-primary",2,"height","40px","width","140px","margin-bottom","20px",3,"click"],[1,"fa","fa-plus"],[3,"contents","headerNames","contentFields","clickContent"],[4,"ngIf"],["tabindex","-1","role","dialog","id","addDialog",1,"modal"],["role","document",1,"modal-dialog"],[1,"modal-content"],[1,"modal-header"],[1,"modal-title"],["type","button","data-dismiss","modal","aria-label","Close",1,"close"],["aria-hidden","true"],[1,"modal-body"],[3,"formGroup"],["for","groupNumber",1,"col-form-label"],["id","groupNumber","formControlName","groupNumber",1,"form-control"],["for","specialtyId",1,"col-form-label"],["formControlName","specialtyId","id","specialtyId",3,"options","config","multiple"],["for","curatorId",1,"col-form-label"],["formControlName","curatorId","id","curatorId",3,"options","config","multiple"],["for","disciplineIds",1,"col-form-label"],["formControlName","disciplineIds","id","disciplineIds",3,"options","config","multiple"],[1,"modal-footer"],["type","button","data-dismiss","modal",1,"btn","btn-primary",3,"click"],["type","button","data-dismiss","modal",1,"btn","btn-secondary",3,"click"],[3,"opened","panelClass","openedChange"],[3,"groupId"]],template:function(e,t){1&e&&(a.Sb(0,"div",0),a.Sb(1,"button",1),a.ec("click",(function(){return t.openAddDialog()})),a.Sb(2,"span"),a.Gc(3,"\u0414\u043e\u0431\u0430\u0432\u0438\u0442\u044c "),a.Nb(4,"i",2),a.Rb(),a.Rb(),a.Sb(5,"app-table",3),a.ec("clickContent",(function(e){return t.openGroupDetails(e)})),a.Rb(),a.Rb(),a.Ec(6,de,3,3,"ng-container",4),a.Sb(7,"div",5),a.Sb(8,"div",6),a.Sb(9,"div",7),a.Sb(10,"div",8),a.Sb(11,"h5",9),a.Gc(12,"\u0414\u043e\u0431\u0430\u0432\u0438\u0442\u044c \u0433\u0440\u0443\u043f\u043f\u0443"),a.Rb(),a.Sb(13,"button",10),a.Sb(14,"span",11),a.Gc(15,"\xd7"),a.Rb(),a.Rb(),a.Rb(),a.Sb(16,"div",12),a.Sb(17,"form",13),a.Sb(18,"label",14),a.Gc(19,"\u041d\u043e\u043c\u0435\u0440 \u0433\u0440\u0443\u043f\u043f\u044b"),a.Rb(),a.Nb(20,"input",15),a.Sb(21,"label",16),a.Gc(22,"\u0421\u043f\u0435\u0446\u0438\u0430\u043b\u044c\u043d\u043e\u0441\u0442\u044c"),a.Rb(),a.Nb(23,"ngx-select-dropdown",17),a.Sb(24,"label",18),a.Gc(25,"\u041a\u0443\u0440\u0430\u0442\u043e\u0440"),a.Rb(),a.Nb(26,"ngx-select-dropdown",19),a.Sb(27,"label",20),a.Gc(28,"\u0414\u0438\u0441\u0446\u0438\u043f\u043b\u0438\u043d\u044b"),a.Rb(),a.Nb(29,"ngx-select-dropdown",21),a.Rb(),a.Rb(),a.Sb(30,"div",22),a.Sb(31,"button",23),a.ec("click",(function(){return t.addGroup()})),a.Gc(32,"\u0414\u043e\u0431\u0430\u0432\u0438\u0442\u044c"),a.Rb(),a.Sb(33,"button",24),a.ec("click",(function(){return t.groupForm.reset({disciplineIds:[]})})),a.Gc(34,"\u041e\u0442\u043c\u0435\u043d\u0438\u0442\u044c"),a.Rb(),a.Rb(),a.Rb(),a.Rb(),a.Rb()),2&e&&(a.zb(5),a.nc("contents",t.groups)("headerNames",t.headerNames)("contentFields",t.contentFields),a.zb(1),a.nc("ngIf",t.selectedGroup),a.zb(11),a.nc("formGroup",t.groupForm),a.zb(6),a.nc("options",t.allSpecialty)("config",t.specialtyConfig)("multiple",!1),a.zb(3),a.nc("options",t.allAvailableTeachers)("config",t.teacherConfig)("multiple",!1),a.zb(3),a.nc("options",t.allDisciplines)("config",t.disciplineConfig)("multiple",!0))},directives:[p.a,n.n,r.q,r.k,r.e,r.a,r.j,r.d,f.a,s.a,ue],styles:[""]}),pe)}],he=((fe=function e(){_classCallCheck(this,e)}).\u0275mod=a.Kb({type:fe}),fe.\u0275inj=a.Jb({factory:function(e){return new(e||fe)},imports:[[o.d.forChild(ge)],o.d]}),fe),ve=i("PCNd"),Se=((me=function e(){_classCallCheck(this,e)}).\u0275mod=a.Kb({type:me}),me.\u0275inj=a.Jb({factory:function(e){return new(e||me)},imports:[[n.c,he,ve.a,r.n,f.b,k.h]]}),me)}}]);