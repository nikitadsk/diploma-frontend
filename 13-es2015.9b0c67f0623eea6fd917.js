(window.webpackJsonp=window.webpackJsonp||[]).push([[13],{Vcfs:function(e,t,i){"use strict";i.r(t),i.d(t,"TeachersModule",(function(){return N}));var a=i("ofXK"),n=i("tyNb"),s=i("dq/x"),r=i("3Pt+"),c=i("fXoL"),o=i("TqRN"),l=i("zivW"),d=i("Xv+k"),b=i("8bGj"),p=i("hMga");function h(e,t){if(1&e&&(c.Qb(0),c.Sb(1,"span",2),c.Gc(2),c.Rb(),c.Pb()),2&e){const e=c.gc();c.zb(2),c.Jc("\u041a\u0443\u0440\u0430\u0442\u043e\u0440 \u0433\u0440\u0443\u043f\u043f\u044b: ",e.supervisedGroup.specialtyName,"-",e.supervisedGroup.groupNumber,"")}}function m(e,t){if(1&e&&(c.Qb(0),c.Sb(1,"span",3),c.Gc(2),c.Rb(),c.Pb()),2&e){const e=t.$implicit;c.zb(2),c.Hc(e.disciplineName)}}let u=(()=>{class e{constructor(e,t){this.disciplinesService=e,this.groupsService=t}ngOnChanges(e){if(this.teacherDisciplines=this.disciplinesService.getByIds(this.teacher.disciplineIds),this.teacher.isCurator){const e=this.groupsService.getByCuratorId(this.teacher._id).subscribe(t=>{this.supervisedGroup=t,e.unsubscribe()})}}}return e.\u0275fac=function(t){return new(t||e)(c.Mb(l.a),c.Mb(p.a))},e.\u0275cmp=c.Gb({type:e,selectors:[["app-teacher-details"]],inputs:{teacher:"teacher"},features:[c.xb],decls:5,vars:7,consts:[[4,"ngIf"],[4,"ngFor","ngForOf"],[1,"badge","badge-danger",2,"margin-right","10px","font-size","15px"],[1,"badge","badge-primary",2,"margin-right","10px","font-size","15px"]],template:function(e,t){1&e&&(c.Sb(0,"h2"),c.Gc(1),c.Rb(),c.Ec(2,h,3,2,"ng-container",0),c.Ec(3,m,3,1,"ng-container",1),c.hc(4,"async")),2&e&&(c.zb(1),c.Kc("",t.teacher.lastName," ",t.teacher.firstName," ",t.teacher.patronym,""),c.zb(1),c.nc("ngIf",t.teacher.isCurator&&t.supervisedGroup),c.zb(1),c.nc("ngForOf",c.ic(4,5,t.teacherDisciplines)))},directives:[a.n,a.m],pipes:[a.b],styles:[""]}),e})();function f(e,t){if(1&e){const e=c.Tb();c.Qb(0),c.Sb(1,"app-details-panel",26,27),c.ec("openedChange",(function(t){return c.xc(e),c.gc().sidebarOpened=t})),c.Nb(3,"app-teacher-details",28),c.Rb(),c.Pb()}if(2&e){const e=c.gc();c.zb(1),c.nc("opened",e.sidebarOpened)("panelClass","EnKlassehar"),c.zb(2),c.nc("teacher",e.selectedTeacher)}}const g=[{path:"",component:(()=>{class e{constructor(e,t,i){this.teachersService=e,this.disciplinesService=t,this.fb=i,this.sidebarOpened=!1,this.headerNames=["\u0424\u0430\u043c\u0438\u043b\u0438\u044f","\u0418\u043c\u044f","\u041e\u0442\u0447\u0435\u0441\u0442\u0432\u043e"],this.contentFields=["lastName","firstName","patronym"],this.teacherForm=this.fb.group({firstName:["",r.o.required],lastName:["",r.o.required],patronym:["",r.o.required],disciplineIds:["",r.o.required]}),this.config={displayKey:"disciplineName",search:!0,limitTo:3,selectedItems:[],searchPlaceholder:"\u041f\u043e\u0438\u0441\u043a",noResultsFound:"\u041d\u0435 \u043d\u0430\u0439\u0434\u0435\u043d\u043e \u0440\u0435\u0437\u0443\u043b\u044c\u0442\u0430\u0442\u043e\u0432",placeholder:"\u0412\u044b\u0431\u0435\u0440\u0438\u0442\u0435"}}ngOnInit(){this.teachers=this.teachersService.getAll()}ngAfterViewInit(){this.detailsPanel&&this.detailsPanel.openedChange.subscribe(e=>{this.sidebarOpened=e,e||(this.selectedTeacher=null)})}teacherClicked(e){this.selectedTeacher=e,this.sidebarOpened=!0}openAddDialog(){this.allDisciplines=this.disciplinesService.getAll()}addTeacher(){if(this.teacherForm.valid){const e=this.teacherForm.value;e.disciplineIds=e.disciplineIds.map(e=>e._id);const t=this.teachersService.create(e).subscribe(()=>{this.teachers=this.teachersService.getAll(),this.teacherForm.reset({disciplineIds:[]}),t.unsubscribe()})}}}return e.\u0275fac=function(t){return new(t||e)(c.Mb(o.a),c.Mb(l.a),c.Mb(r.c))},e.\u0275cmp=c.Gb({type:e,selectors:[["app-teachers"]],viewQuery:function(e,t){var i;1&e&&c.Mc(s.a,!0),2&e&&c.uc(i=c.fc())&&(t.detailsPanel=i.first)},decls:38,vars:10,consts:[[1,"d-flex","flex-column",2,"margin","20px"],["data-toggle","modal","data-target","#addDialog",1,"btn","btn-primary",2,"height","40px","width","140px","margin-bottom","20px",3,"click"],[1,"fa","fa-plus"],[3,"contents","headerNames","contentFields","clickContent"],[4,"ngIf"],["tabindex","-1","role","dialog","id","addDialog",1,"modal"],["role","document",1,"modal-dialog"],[1,"modal-content"],[1,"modal-header"],[1,"modal-title"],["type","button","data-dismiss","modal","aria-label","Close",1,"close"],["aria-hidden","true"],[1,"modal-body"],[1,"form-group",3,"formGroup"],[1,"row",2,"margin-bottom","20px"],[1,"col"],["for","lastName",1,"col-form-label"],["id","lastName","formControlName","lastName",1,"form-control"],["for","firstName",1,"col-form-label"],["id","firstName","formControlName","firstName",1,"form-control"],["for","patronym",1,"col-form-label"],["id","patronym","formControlName","patronym",1,"form-control"],["formControlName","disciplineIds",3,"options","config","multiple"],[1,"modal-footer"],["type","button","data-dismiss","modal",1,"btn","btn-primary",3,"click"],["type","button","data-dismiss","modal",1,"btn","btn-secondary"],[3,"opened","panelClass","openedChange"],["detailspanel",""],[3,"teacher"]],template:function(e,t){1&e&&(c.Sb(0,"div",0),c.Sb(1,"button",1),c.ec("click",(function(){return t.openAddDialog()})),c.Sb(2,"span"),c.Gc(3,"\u0414\u043e\u0431\u0430\u0432\u0438\u0442\u044c "),c.Nb(4,"i",2),c.Rb(),c.Rb(),c.Sb(5,"app-table",3),c.ec("clickContent",(function(e){return t.teacherClicked(e)})),c.Rb(),c.Ec(6,f,4,3,"ng-container",4),c.Rb(),c.Sb(7,"div",5),c.Sb(8,"div",6),c.Sb(9,"div",7),c.Sb(10,"div",8),c.Sb(11,"h5",9),c.Gc(12,"\u0414\u043e\u0431\u0430\u0432\u0438\u0442\u044c \u043f\u0440\u0435\u043f\u043e\u0434\u0430\u0432\u0430\u0442\u0435\u043b\u044f"),c.Rb(),c.Sb(13,"button",10),c.Sb(14,"span",11),c.Gc(15,"\xd7"),c.Rb(),c.Rb(),c.Rb(),c.Sb(16,"div",12),c.Sb(17,"form",13),c.Sb(18,"div",14),c.Sb(19,"div",15),c.Sb(20,"label",16),c.Gc(21,"\u0424\u0430\u043c\u0438\u043b\u0438\u044f"),c.Rb(),c.Nb(22,"input",17),c.Rb(),c.Sb(23,"div",15),c.Sb(24,"label",18),c.Gc(25,"\u0418\u043c\u044f"),c.Rb(),c.Nb(26,"input",19),c.Rb(),c.Sb(27,"div",15),c.Sb(28,"label",20),c.Gc(29,"\u041e\u0442\u0447\u0435\u0441\u0442\u0432\u043e"),c.Rb(),c.Nb(30,"input",21),c.Rb(),c.Rb(),c.Nb(31,"ngx-select-dropdown",22),c.hc(32,"async"),c.Rb(),c.Rb(),c.Sb(33,"div",23),c.Sb(34,"button",24),c.ec("click",(function(){return t.addTeacher()})),c.Gc(35,"\u0414\u043e\u0431\u0430\u0432\u0438\u0442\u044c"),c.Rb(),c.Sb(36,"button",25),c.Gc(37,"\u041e\u0442\u043c\u0435\u043d\u0438\u0442\u044c"),c.Rb(),c.Rb(),c.Rb(),c.Rb(),c.Rb()),2&e&&(c.zb(5),c.nc("contents",t.teachers)("headerNames",t.headerNames)("contentFields",t.contentFields),c.zb(1),c.nc("ngIf",t.selectedTeacher),c.zb(11),c.nc("formGroup",t.teacherForm),c.zb(14),c.nc("options",c.ic(32,8,t.allDisciplines))("config",t.config)("multiple",!0))},directives:[d.a,a.n,r.q,r.k,r.e,r.a,r.j,r.d,b.a,s.a,u],pipes:[a.b],styles:[""]}),e})()}];let v=(()=>{class e{}return e.\u0275mod=c.Kb({type:e}),e.\u0275inj=c.Jb({factory:function(t){return new(t||e)},imports:[[n.d.forChild(g)],n.d]}),e})();var S=i("PCNd");let N=(()=>{class e{}return e.\u0275mod=c.Kb({type:e}),e.\u0275inj=c.Jb({factory:function(t){return new(t||e)},imports:[[a.c,v,r.n,S.a,b.b]]}),e})()}}]);